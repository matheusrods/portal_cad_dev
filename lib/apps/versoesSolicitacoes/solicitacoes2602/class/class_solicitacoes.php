<?php

ini_set('display_startup_errors', 1);
session_start();

require_once $_SERVER["DOCUMENT_ROOT"] . "/lib/class/database/Conexao.php";
require_once $_SERVER["DOCUMENT_ROOT"] . "/lib/class/database/class.database.php";
require_once $_SERVER["DOCUMENT_ROOT"] . "/lib/class/geraLog.php";

$mat = $_SESSION['matricula'];

Class funcoes {
    
    public function __construct(){
        if(!isset($_SESSION)){
            session_start();
        }
        global $mat;
        $mat = $_SESSION['matricula'];
        $caminhoLogErro = $this->caminhoLogErro = $_SERVER["DOCUMENT_ROOT"] . "/log/log_erros";
    }

    // Função que conta o total de novas solicitações, para que exiba o alerta no cabeçalho da tabela na visão CAD
    public function contaNovasSolicitacoes(){
        global $mat;
        $db = New Database('solicitacoes');
        $queryContaNovasSolicitacoes = "SELECT * FROM solicitacoes.solicitacoes WHERE status = 1;";
        $retorno = array();
        try {
            $execQueryContaNovasSolicitacoes = $db->DbGetAll($queryContaNovasSolicitacoes);
            if(sizeof($execQueryContaNovasSolicitacoes) > 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            } else if(sizeof($execQueryContaNovasSolicitacoes) == 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryContaNovasSolicitacoes:" . $queryContaNovasSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno["mensagem"] = "Não foi possível verificar se há novas solicitações. Log " . $arquivoLog;
            $retorno["status"] = '0';
        } finally {
            return $retorno;
        }
    }

    // Função que conta o total de solicitações que saíram do status "nova" para qualquer outro, para que exiba o alerta no cabeçalho da tabela na visão CAD
    public function contaNovasSolicitacoesVisaoGestor(){
        global $mat;
        $db = New Database('solicitacoes');
        $queryContaNovasSolicitacoes = "SELECT * FROM solicitacoes.solicitacoes WHERE status <> 1;";
        $retorno = array();
        try {
            $execQueryContaNovasSolicitacoes = $db->DbGetAll($queryContaNovasSolicitacoes);
            if(sizeof($execQueryContaNovasSolicitacoes) > 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            } else if(sizeof($execQueryContaNovasSolicitacoes) == 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryContaNovasSolicitacoes:" . $queryContaNovasSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno["mensagem"] = "Não foi possível verificar se há novas solicitações. Log " . $arquivoLog;
            $retorno["status"] = '0';
        } finally {
            return $retorno;
        }
    }

    // Função que traz as informações de todas as solicitações gravadas
    public function consultaSolicitacoes(){
        global $mat;
        $db = New Database("solicitacoes");
        $queryConsultaSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema from solicitacoes.solicitacoes a 
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao
            ORDER BY a.idSolicitacao;";
        
        $retorno = array();
        try {
            $execQueryConsultaSolicitacoes = $db->DbGetAll($queryConsultaSolicitacoes); 

            if(sizeof($execQueryConsultaSolicitacoes) > 0){
                $dadosTabelaSolicitacoes = '';
                for($i = 0; $i < (sizeof($execQueryConsultaSolicitacoes)); $i++){
                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }

                    $dadosTabelaSolicitacoes = $dadosTabelaSolicitacoes.'
                    <tr>
                        <td>#'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['prefixo'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td class="Clicar" >
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['id'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                }
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaSolicitacoes;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryConsultaSolicitacoes:" . $queryConsultaSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function filtrarSolicitacoes($camposSelecionados){
        global $mat;
        $retorno = array();
        $db = New Database("solicitacoes");

        $tamanhoArray = sizeof($camposSelecionados);
        $whereSolicitacoes = "WHERE ";
        $mensagemErro = '';

        for($i = 0; $i < $tamanhoArray; $i++){
            $indices = array_keys($camposSelecionados);
            $valores = array_values($camposSelecionados);
            $whereSolicitacoes = $whereSolicitacoes .$indices[$i] .' LIKE "%'.$valores[$i].'%" AND ';
            
            switch($indices[$i]){
                case "a.idSolicitacao":
                    $mensagemErro = $mensagemErro."-ID Solicitação: ".$valores[$i].'<br>';
                break; 
                
                case "a.tema":
                    $mensagemErro = $mensagemErro."-Tema/Produto: ".$valores[$i].'<br>';
                break;

                case "a.prefixo":
                    $mensagemErro = $mensagemErro."-Dependência: ".$valores[$i].'<br>';
                break;

                case "a.status":
                    $statusErro = $db->DbGetAll("select status from solicitacoes.status WHERE id = '".$valores[$i]."'; ");
                    // $mensagemErro = $mensagemErro."-Status: ".$valores[$i].'<br>';
                    $mensagemErro = $mensagemErro."-Status: ".$statusErro[0]['status'].'<br>';
                break;
            }
        }
        $whereSolicitacoes = rtrim($whereSolicitacoes, "' AND '");

        // $queryFiltraSolicitacoes = "SELECT a.*, b.status FROM solicitacoes.solicitacoes a LEFT JOIN solicitacoes.status b ON a.status = b.id ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";
        
        $queryFiltraSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema from solicitacoes.solicitacoes a 
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";

        try {
            $execQueryFiltraSolicitacoes = $db->DbGetAll($queryFiltraSolicitacoes);
            if(sizeof($execQueryFiltraSolicitacoes) > 0){
                $dadosTabelaSolicitacoes = '';
                for($i = 0; $i < (sizeof($execQueryFiltraSolicitacoes)); $i++){
                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '1'){
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }


                    $dadosTabelaSolicitacoes = $dadosTabelaSolicitacoes.'
                    <tr>
                        <td>#'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['prefixo'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td class="Clicar" >
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['id'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                } 
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaSolicitacoes;
            } else {
                $retorno['status'] = '0';
                $retorno['mensagem'] = "Não localizamos nenhuma solicitação com os termos digitados:<br><br>".$mensagemErro;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryConsultaSolicitacoes:" . $queryFiltraSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            
            return $retorno;
        }        
    }

    public function filtrarSolicitacoesVisaoGestor($camposSelecionados){
        global $mat;
        $retorno = array();
        $db = New Database("solicitacoes");

        $tamanhoArray = sizeof($camposSelecionados);
        $whereSolicitacoes = "WHERE prefixo = '".$_SESSION['dependencia']."' AND ";
        $mensagemErro = '';

        for($i = 0; $i < $tamanhoArray; $i++){
            $indices = array_keys($camposSelecionados);
            $valores = array_values($camposSelecionados);
            $whereSolicitacoes = $whereSolicitacoes .$indices[$i] .' LIKE "%'.$valores[$i].'%" AND ';
            
            switch($indices[$i]){
                case "a.idSolicitacao":
                    $mensagemErro = $mensagemErro."-ID Solicitação: ".$valores[$i].'<br>';
                break; 
                
                case "a.tema":
                    $mensagemErro = $mensagemErro."-Tema/Produto: ".$valores[$i].'<br>';
                break;

                case "a.prefixo":
                    $mensagemErro = $mensagemErro."-Dependência: ".$valores[$i].'<br>';
                break;

                case "a.status":
                    $statusErro = $db->DbGetAll("select status from solicitacoes.status WHERE id = '".$valores[$i]."'; ");
                    // $mensagemErro = $mensagemErro."-Status: ".$valores[$i].'<br>';
                    $mensagemErro = $mensagemErro."-Status: ".$statusErro[0]['status'].'<br>';
                break;
            }
        }
        $whereSolicitacoes = rtrim($whereSolicitacoes, "' AND '");

        // $queryFiltraSolicitacoes = "SELECT a.*, b.status FROM solicitacoes.solicitacoes a LEFT JOIN solicitacoes.status b ON a.status = b.id ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";
        
        $queryFiltraSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema, date_format(a.timestamp, '%d/%m/%Y') as dataFormatada FROM solicitacoes.solicitacoes a
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";
        // echo $queryFiltraSolicitacoes;
        
        try {
            $execQueryFiltraSolicitacoes = $db->DbGetAll($queryFiltraSolicitacoes);
            if(sizeof($execQueryFiltraSolicitacoes) > 0){
                $dadosTabelaSolicitacoes = '';
                $iconeEditar='';
                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                    }
                for($i = 0; $i < (sizeof($execQueryFiltraSolicitacoes)); $i++){

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }
                    $dadosTabelaSolicitacoes = $dadosTabelaSolicitacoes.'
                    <tr>
                        <td>#'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['dataFormatada'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td id="iconeEditar" class="Clicar" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'">'.$iconeEditar.'</td>
                        <td id="iconeNavega" class="Clicar" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                } 
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaSolicitacoes;
            } else {
                $retorno['status'] = '0';
                $retorno['mensagem'] = "Não localizamos nenhuma solicitação com os termos digitados:<br><br>".$mensagemErro;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryFiltraSolicitacoes: " . $queryFiltraSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "filtrarSolicitacoesVisaoGestor", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            
            return $retorno;
        }        
    }
    






    // Função que monta o formulário de acordo com a opção selecionada
    public function montaFormulario($opcaoSelecionada){
        $db = New Database("solicitacoes");
        $queryMontaFormulario = "SELECT *, b.id as idOpcao FROM solicitacoes.etapaFormularios a
            LEFT JOIN solicitacoes.opcoesFormularios b ON a.id = b.idFormulario
            WHERE a.id = '".$opcaoSelecionada."' ORDER BY b.ordem ASC;";
        
        $estiloDivsAbertas = 'style="display: none;"';
        
        if($opcaoSelecionada == 1){
            $estiloDivsAbertas = '';
        }

        $scriptTooltip = '';

        // if($opcaoSelecionada == '3' || $opcaoSelecionada == '4'){
        //     $scriptTooltip = '<img src="/lib/img/cabecalho/imgCabecalho.svg" style="display:none;" onload="tooltip();">';
        // }

        try {
            $execQueryMontaFormulario = $db->DbGetAll($queryMontaFormulario);
            if($execQueryMontaFormulario) {

                if($opcaoSelecionada < 100 && $opcaoSelecionada <> 99){
                    $status = '1';
                    $montaFormulario = '<form id="formFormularioId'.$opcaoSelecionada.'" class="formFormularioSolicitacoes" attr-formOrdemExibicao="'.$execQueryMontaFormulario[0]['ordemExibicao'].'" attr-chamadoPor="'.$execQueryMontaFormulario[0]['chamadoPor'].'" '.$estiloDivsAbertas.'><p>'.$execQueryMontaFormulario[0]['etapaFormulario'].'</p>';
                    
                    for($i = 0; $i < sizeof($execQueryMontaFormulario); $i++){
                        $montaFormulario = $montaFormulario.'
                            <div class="radio-container">
                                <label for="radio'.$execQueryMontaFormulario[$i]['idOpcao'].'">
                                    <div style="width: 100%; display: flex; align-items: center;">
                                        <input type="radio" id="radio'.$execQueryMontaFormulario[$i]['idOpcao'].'" name="radio"></input>
                                        <div class="custom-radio">
                                            <span class="radioSpan Clicar" id="radioSpan'.$execQueryMontaFormulario[$i]['idOpcao'].'" attr-ordemExibicao="'.$execQueryMontaFormulario[$i]['ordemExibicao'].'" attr-formularioAtual="'.$execQueryMontaFormulario[$i]['idFormulario'].'" attr-proximoFormulario="'.$execQueryMontaFormulario[$i]['proximaEtapaFormulario'].'"></span>
                                        </div>
                                        <span style="width: 75%; margin-left: 2%; font-color=#646464;">
                                            '.$execQueryMontaFormulario[$i]['textoOpcao'].'
                                        </span>
                                        <div style="display: inline-flex;">
                                            '.$execQueryMontaFormulario[$i]['textoDuvida'].'
                                            '.$execQueryMontaFormulario[$i]['campoDuvida'].'
                                        </div>
                                    </div>
                                </label>
                            </div>
                        ';
                    }
                } else if($opcaoSelecionada == 99){
                    $status = '1';
                    $montaFormulario = '<form id="formFormularioId'.$opcaoSelecionada.'" class="formFormularioSolicitacoes" attr-chamadoPor="'.$execQueryMontaFormulario[0]['chamadoPor'].'" '.$estiloDivsAbertas.'>'.$execQueryMontaFormulario[0]['etapaFormulario'];
                } else {
                    $status = '2';
                    $montaFormulario = '<form id="formFormularioId'.$opcaoSelecionada.'" class="formFormularioSolicitacoes" attr-chamadoPor="'.$execQueryMontaFormulario[0]['chamadoPor'].'" '.$estiloDivsAbertas.'>'.$execQueryMontaFormulario[0]['etapaFormulario'];
                }
            } 
            $retorno['status'] = $status;
            $retorno['mensagem'] = $montaFormulario.'</form>'.$scriptTooltip;
        } catch(Exception $e) {
            $status = '0';
            $informacoesErro = "erro: " . $e . "\n\\n\$queryMontaFormulario:" . $queryMontaFormulario;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "montaFormulario", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível montar os formulários para preenchimento. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function montaTabelaAcompanhamentoVisaoGestor($dependencia){
        $retorno = array();
        $db = New Database('solicitacoes');
        $queryMontaTabela = "
            SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema, date_format(a.timestamp, '%d/%m/%Y') as dataFormatada FROM solicitacoes.solicitacoes a
                LEFT JOIN solicitacoes.status b ON a.status = b.id
                LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
                LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao
                WHERE prefixo = '".$dependencia."';";

        $retorno = array();
        try {
            $execQueryConsultaSolicitacoes = $db->DbGetAll($queryMontaTabela); 

            if(sizeof($execQueryConsultaSolicitacoes) > 0){
                $dadosTabelaAcompanhamento = '';
                for($i = 0; $i < (sizeof($execQueryConsultaSolicitacoes)); $i++){
                    $iconeEditar='';
                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }

                    $dadosTabelaAcompanhamento = $dadosTabelaAcompanhamento.'
                    <tr>
                        <td>#'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['dataFormatada'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td id="iconeEditar" class="Clicar" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'">'.$iconeEditar.'</td>
                        <td id="iconeNavega" class="Clicar" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                }
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaAcompanhamento;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryMontaTabela:" . $queryMontaTabela;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function gravaJornadaTranascional($tipoSolicitacao, $temaProduto, $canalTransacao, $assuntoTransacao, $objetivoTransacao, $canaisExistentes, $publicoAlvo, $metricaSucesso, $acompanhamentoMetrica, $resultadoProjetado, $estimuloConsumoTransacao, $raOuRegulatorio, $especificoWhatsapp){
        $db = New Database("solicitacoes");
        $retorno = array();
        
        $queryIncluiRegistroSolicitacao = "
            INSERT INTO `solicitacoes`.`solicitacoes` (
                `tipoSolicitacao`, 
                `matricula`, 
                `nome`, 
                `email`, 
                `dependencia`, 
                `prefixo`
            ) VALUES (
                '".$tipoSolicitacao."', 
                '".$_SESSION['matricula']."', 
                '".$_SESSION['nome']."', 
                '".$_SESSION['email']."', 
                NULL, 
                '".$_SESSION['dependencia']."'
            );
        ";

        try {
            $execQueryRegistraSolicitacao = $db->DbQuery($queryIncluiRegistroSolicitacao);
        
            if($execQueryRegistraSolicitacao){

                $queryConsultaUltimoId = "SELECT idSolicitacao FROM solicitacoes.solicitacoes ORDER BY idSolicitacao DESC LIMIT 1;";
                
                try {
                    if($especificoWhatsapp == 'undefined'){
                        $especificoWhatsapp = 'nao';
                    }
                    $execConsultaUltimoId = $db->DbGetAll($queryConsultaUltimoId);

                    if($execConsultaUltimoId){
                        $queryIncluiRespostas = "
                            INSERT INTO `solicitacoes`.`respostasJornadasTransacionais` (
                                `idSolicitacao`,
                                `temaProduto`, 
                                `canalTransacao`, 
                                `raOuRegulatorio`, 
                                `especificoWhatsapp`, 
                                `assuntoTransacao`, 
                                `objetivoTransacao`, 
                                `canaisTransacaoExiste`, 
                                `publicoAlvo`, 
                                `metricaSucesso`, 
                                `resultadoProjetado`, 
                                `acompanhamentoMetrica`, 
                                `estimuloConsumoTransacao`
                            ) VALUES (
                                '".$execConsultaUltimoId[0]['idSolicitacao']."',
                                '".$temaProduto."', 
                                '".$canalTransacao."',
                                '".$raOuRegulatorio."',
                                '".$especificoWhatsapp."',
                                '".$assuntoTransacao."',
                                '".$objetivoTransacao."',
                                '".$canaisExistentes."',
                                '".$publicoAlvo."',
                                '".$metricaSucesso."',
                                '".$resultadoProjetado."',
                                '".$acompanhamentoMetrica."',
                                '".$estimuloConsumoTransacao."'
                            );"
                        ;
                        try {
                            $execQueryIncluiRespostas = $db->DbQuery($queryIncluiRespostas);
            
                            if($execQueryIncluiRespostas){
                                $retorno['status'] = "1";
                                $retorno['mensagem'] = "Solicitação #".$execConsultaUltimoId[0]['idSolicitacao']." incluída com sucesso!";
                            }
                        } catch (Exception $e){
                            $status = '0';
                            $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaUltimoId:" . $queryConsultaUltimoId;
                            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaTranascional", $informacoesErro, $mat);
                            $retorno['status'] = $status;
                            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                        }
                    }
                    
                } catch (Exception $e){
                    $status = '0';
                    $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRespostas:" . $queryIncluiRespostas;
                    $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaTranascional", $informacoesErro, $mat);
                    $retorno['status'] = $status;
                    $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                }
                
            }
        } catch (Exception $e){
            $status = '0';
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRegistroSolicitacao:" . $queryIncluiRegistroSolicitacao;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaTranascional", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally{
            return $retorno;
        }
    }

    public function gravaJornadaInformacional($canalTransacao, $atendeRa, $especificoWhatsapp, $assuntoJornada, $objetivoTransacao, $metricaSucesso, $resultadoProjetado, $acompanhamentoMetrica, $estimuloConsumoTransacao, $tipoSolicitacao){
        $db = New Database("solicitacoes");
        $retorno = array();
        
        $queryIncluiRegistroSolicitacao = "
            INSERT INTO `solicitacoes`.`solicitacoes` (
                `tipoSolicitacao`, 
                `matricula`, 
                `nome`, 
                `email`, 
                `dependencia`, 
                `prefixo`
            ) VALUES (
                '".$tipoSolicitacao."', 
                '".$_SESSION['matricula']."', 
                '".$_SESSION['nome']."', 
                '".$_SESSION['email']."', 
                NULL, 
                '".$_SESSION['dependencia']."'
            );
        ";

        try {
            $execQueryRegistraSolicitacao = $db->DbQuery($queryIncluiRegistroSolicitacao);
        
            if($execQueryRegistraSolicitacao){

                $queryConsultaUltimoId = "SELECT idSolicitacao FROM solicitacoes.solicitacoes ORDER BY idSolicitacao DESC LIMIT 1;";
                
                try {
                    if($especificoWhatsapp == 'undefined'){
                        $especificoWhatsapp = 'nao';
                    }
                    
                    $execConsultaUltimoId = $db->DbGetAll($queryConsultaUltimoId);

                    if($execConsultaUltimoId){
                        $queryIncluiRespostas = "
                            INSERT INTO `solicitacoes`.`respostasJornadasInformacionais` (
                                `idSolicitacao`, 
                                `assuntoJornada`, 
                                `atendeRa`, 
                                `especificoWhatsapp`, 
                                `objetivoJornada`, 
                                `metricaSucesso`, 
                                `resultadoProjetado`, 
                                `acompanhamentoMetrica`, 
                                `estimuloConsumoTransacao`
                            ) VALUES (
                                '".$execConsultaUltimoId[0]['idSolicitacao']."', 
                                '".$assuntoJornada."', 
                                '".$atendeRa."', 
                                '".$especificoWhatsapp."', 
                                '".$objetivoTransacao."', 
                                '".$metricaSucesso."', 
                                '".$resultadoProjetado."', 
                                '".$acompanhamentoMetrica."', 
                                '".$estimuloConsumoTransacao."'
                            );
                        ";
                        try {
                            $execQueryIncluiRespostas = $db->DbQuery($queryIncluiRespostas);
            
                            if($execQueryIncluiRespostas){
                                $retorno['status'] = "1";
                                $retorno['mensagem'] = "Solicitação #".$execConsultaUltimoId[0]['idSolicitacao']." incluída com sucesso!";
                            }
                        } catch (Exception $e){
                            $status = '0';
                            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRespostas:" . $queryIncluiRespostas;
                            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaInformacional", $informacoesErro, $mat);
                            $retorno['status'] = $status;
                            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                        }
                    }
                } catch (Exception $e){
                    $status = '0';
                    $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaUltimoId:" . $queryConsultaUltimoId;
                    $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaInformacional", $informacoesErro, $mat);
                    $retorno['status'] = $status;
                    $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                }
            }
        } catch (Exception $e){
            $status = '0';
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRegistroSolicitacao:" . $queryIncluiRegistroSolicitacao;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaInformacional", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally{
            return $retorno;
        }
    }

    // Função que grava eventuais logs de erro de banco de dados em formato texto
    public function geraLogExcecao($nomeApp, $nomeFuncao, $informacoesAdicionais, $mat){
        $dateTime = date("Y-m-d")."_". date("H.i.s");
        $nomeArquivo = $dateTime . "_" . $mat . "_" . $nomeApp . "_" . $nomeFuncao .".txt";
        $caminhoArquivo = $this->caminhoLogErro . "/" . $nomeArquivo;

        $strDataHora = print_r(new DateTime(), true);
        $strRequest = print_r($_REQUEST, true);
        $strSession = print_r($_SESSION, true);
        
        $strArquivo = "data:\n" . $strDataHora . "\n\$_REQUEST:\n" . $strRequest . "\n\$_SESSION:\n" . $strSession . "\n\$informacoesAdicionais:\n" . $informacoesAdicionais;

        file_put_contents($caminhoArquivo, $strArquivo);
        chmod($caminhoArquivo, 0777);

        return $caminhoArquivo;
    }

    public function acessaDetalheSolicitacao ()
    {
        
    }
    

    
}
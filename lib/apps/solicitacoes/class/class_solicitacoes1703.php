<?php

ini_set('display_startup_errors', 1);
session_start();

require_once $_SERVER["DOCUMENT_ROOT"] . "/lib/class/database/Conexao.php";
require_once $_SERVER["DOCUMENT_ROOT"] . "/lib/class/database/class.database.php";
require_once $_SERVER["DOCUMENT_ROOT"] . "/lib/class/geraLog.php";

$mat = $_SESSION['matricula'];

Class funcoes {
    
    public function __construct(){
        if(!isset($_SESSION)){
            session_start();
        }
        global $mat;
        $mat = $_SESSION['matricula'];
        $caminhoLogErro = $this->caminhoLogErro = $_SERVER["DOCUMENT_ROOT"] . "/log/log_erros";
    }

    // Função que conta o total de novas solicitações, para que exiba o alerta no cabeçalho da tabela na visão CAD
    public function contaNovasSolicitacoes(){
        global $mat;
        $db = New Database('solicitacoes');
        $queryContaNovasSolicitacoes = "SELECT * FROM solicitacoes.solicitacoes WHERE status = 1;";
        $retorno = array();
        try {
            $execQueryContaNovasSolicitacoes = $db->DbGetAll($queryContaNovasSolicitacoes);
            if(sizeof($execQueryContaNovasSolicitacoes) > 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            } else if(sizeof($execQueryContaNovasSolicitacoes) == 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryContaNovasSolicitacoes:" . $queryContaNovasSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno["mensagem"] = "Não foi possível verificar se há novas solicitações. Log " . $arquivoLog;
            $retorno["status"] = '0';
        } finally {
            return $retorno;
        }
    }

    // Função que conta o total de solicitações que saíram do status "nova" para qualquer outro, para que exiba o alerta no cabeçalho da tabela na visão CAD
    public function contaNovasSolicitacoesVisaoGestor(){
        global $mat;
        $db = New Database('solicitacoes');
        $queryContaNovasSolicitacoes = "SELECT * FROM solicitacoes.solicitacoes WHERE status <> 1;";
        $retorno = array();
        try {
            $execQueryContaNovasSolicitacoes = $db->DbGetAll($queryContaNovasSolicitacoes);
            if(sizeof($execQueryContaNovasSolicitacoes) > 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            } else if(sizeof($execQueryContaNovasSolicitacoes) == 0){
                $retorno["mensagem"] = sizeof($execQueryContaNovasSolicitacoes);
                $retorno["status"] = '1';
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryContaNovasSolicitacoes:" . $queryContaNovasSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno["mensagem"] = "Não foi possível verificar se há novas solicitações. Log " . $arquivoLog;
            $retorno["status"] = '0';
        } finally {
            return $retorno;
        }
    }

    // Função que traz as informações de todas as solicitações gravadas
    // Visão CAD - > Anotação Yasmin
    public function consultaSolicitacoes(){
        global $mat;
        $db = New Database("solicitacoes");
        $queryConsultaSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema from solicitacoes.solicitacoes a 
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao
            ORDER BY a.idSolicitacao;";
        
        $retorno = array();
        try {
            $execQueryConsultaSolicitacoes = $db->DbGetAll($queryConsultaSolicitacoes); 

            if(sizeof($execQueryConsultaSolicitacoes) > 0){
                $dadosTabelaSolicitacoes = '';
                for($i = 0; $i < (sizeof($execQueryConsultaSolicitacoes)); $i++){
                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }

                    $dadosTabelaSolicitacoes = $dadosTabelaSolicitacoes.'
                    <tr>
                        <td>#'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['prefixo'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td id= "iconeNavegaCAD" class="Clicar" attr-idsolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'" >
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idsolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                }
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaSolicitacoes;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryConsultaSolicitacoes:" . $queryConsultaSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function filtrarSolicitacoes($camposSelecionados){
        global $mat;
        $retorno = array();
        $db = New Database("solicitacoes");

        $tamanhoArray = sizeof($camposSelecionados);
        $whereSolicitacoes = "WHERE ";
        $mensagemErro = '';

        for($i = 0; $i < $tamanhoArray; $i++){
            $indices = array_keys($camposSelecionados);
            $valores = array_values($camposSelecionados);
            $whereSolicitacoes = $whereSolicitacoes .$indices[$i] .' LIKE "%'.$valores[$i].'%" AND ';
            
            switch($indices[$i]){
                case "a.idSolicitacao":
                    $mensagemErro = $mensagemErro."-ID Solicitação: ".$valores[$i].'<br>';
                break; 
                
                case "a.tema":
                    $mensagemErro = $mensagemErro."-Tema/Produto: ".$valores[$i].'<br>';
                break;

                case "a.prefixo":
                    $mensagemErro = $mensagemErro."-Dependência: ".$valores[$i].'<br>';
                break;

                case "a.status":
                    $statusErro = $db->DbGetAll("select status from solicitacoes.status WHERE id = '".$valores[$i]."'; ");
                    // $mensagemErro = $mensagemErro."-Status: ".$valores[$i].'<br>';
                    $mensagemErro = $mensagemErro."-Status: ".$statusErro[0]['status'].'<br>';
                break;
            }
        }
        $whereSolicitacoes = rtrim($whereSolicitacoes, "' AND '");

        // $queryFiltraSolicitacoes = "SELECT a.*, b.status FROM solicitacoes.solicitacoes a LEFT JOIN solicitacoes.status b ON a.status = b.id ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";
        
        $queryFiltraSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema from solicitacoes.solicitacoes a 
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";

        try {
            $execQueryFiltraSolicitacoes = $db->DbGetAll($queryFiltraSolicitacoes);
            if(sizeof($execQueryFiltraSolicitacoes) > 0){
                $dadosTabelaSolicitacoes = '';
                for($i = 0; $i < (sizeof($execQueryFiltraSolicitacoes)); $i++){
                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '1'){
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }


                    $dadosTabelaSolicitacoes = $dadosTabelaSolicitacoes.'
                    <tr>
                        <td>#'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['prefixo'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td id="iconeNavegaCAD" class="Clicar" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['id'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                } 
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaSolicitacoes;
            } else {
                $retorno['status'] = '0';
                $retorno['mensagem'] = "Não localizamos nenhuma solicitação com os termos digitados:<br><br>".$mensagemErro;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryFiltraSolicitacoes:" . $queryFiltraSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            
            return $retorno;
        }        
    }

    public function filtrarSolicitacoesVisaoGestor($camposSelecionados){
        global $mat;
        $retorno = array();
        $db = New Database("solicitacoes");

        $tamanhoArray = sizeof($camposSelecionados);
        $whereSolicitacoes = "WHERE prefixo = '".$_SESSION['dependencia']."' AND ";
        $mensagemErro = '';

        for($i = 0; $i < $tamanhoArray; $i++){
            $indices = array_keys($camposSelecionados);
            $valores = array_values($camposSelecionados);
            $whereSolicitacoes = $whereSolicitacoes .$indices[$i] .' LIKE "%'.$valores[$i].'%" AND ';
            
            switch($indices[$i]){
                case "a.idSolicitacao":
                    $mensagemErro = $mensagemErro."-ID Solicitação: ".$valores[$i].'<br>';
                break; 
                
                case "a.tema":
                    $mensagemErro = $mensagemErro."-Tema/Produto: ".$valores[$i].'<br>';
                break;
                
                case "a.timestamp":
                    $date=date_create($valores[$i]);
                    $dataFormatada = date_format($date,"d/m/Y");
                    $mensagemErro = $mensagemErro."-Data de Solicitação: ".$dataFormatada.'<br>';
                break;

                case "a.prefixo":
                    $mensagemErro = $mensagemErro."-Dependência: ".$valores[$i].'<br>';
                break;

                case "a.status":
                    $statusErro = $db->DbGetAll("select status from solicitacoes.status WHERE id = '".$valores[$i]."'; ");
                    // $mensagemErro = $mensagemErro."-Status: ".$valores[$i].'<br>';
                    $mensagemErro = $mensagemErro."-Status: ".$statusErro[0]['status'].'<br>';
                break;
            }
        }
        $whereSolicitacoes = rtrim($whereSolicitacoes, "' AND '");

        // $queryFiltraSolicitacoes = "SELECT a.*, b.status FROM solicitacoes.solicitacoes a LEFT JOIN solicitacoes.status b ON a.status = b.id ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";
        
        $queryFiltraSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema, date_format(a.timestamp, '%d/%m/%Y') as dataFormatada FROM solicitacoes.solicitacoes a
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao ".$whereSolicitacoes." ORDER BY a.idSolicitacao;";
        // echo $queryFiltraSolicitacoes;
        
        try {
            $execQueryFiltraSolicitacoes = $db->DbGetAll($queryFiltraSolicitacoes);
            if(sizeof($execQueryFiltraSolicitacoes) > 0){
                $dadosTabelaSolicitacoes = '';
                $iconeEditar='';
                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                    }
                for($i = 0; $i < (sizeof($execQueryFiltraSolicitacoes)); $i++){

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryFiltraSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }
                    $dadosTabelaSolicitacoes = $dadosTabelaSolicitacoes.'
                    <tr>
                        <td>#'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryFiltraSolicitacoes[$i]['dataFormatada'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td id="iconeEditar" class="Clicar" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'">'.$iconeEditar.'</td>
                        <td id="iconeNavega" class="Clicar" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryFiltraSolicitacoes[$i]['idSolicitacao'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                } 
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaSolicitacoes;
            } else {
                $retorno['status'] = '0';
                $retorno['mensagem'] = "Não localizamos nenhuma solicitação com os termos digitados:<br><br>".$mensagemErro;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryFiltraSolicitacoes: " . $queryFiltraSolicitacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "filtrarSolicitacoesVisaoGestor", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            
            return $retorno;
        }        
    }
    






    // Função que monta o formulário de acordo com a opção selecionada
    public function montaFormulario($opcaoSelecionada){
        global $mat;
        $db = New Database("solicitacoes");
        $queryMontaFormulario = "SELECT *, b.id as idOpcao FROM solicitacoes.etapaFormularios a
            LEFT JOIN solicitacoes.opcoesFormularios b ON a.id = b.idFormulario
            WHERE a.id = '".$opcaoSelecionada."' ORDER BY b.ordem ASC;";
        
        $estiloDivsAbertas = 'style="display: none;"';
        
        if($opcaoSelecionada == 1){
            $estiloDivsAbertas = '';
        }

        $scriptTooltip = '';

        // if($opcaoSelecionada == '3' || $opcaoSelecionada == '4'){
        //     $scriptTooltip = '<img src="/lib/img/cabecalho/imgCabecalho.svg" style="display:none;" onload="tooltip();">';
        // }

        try {
            $execQueryMontaFormulario = $db->DbGetAll($queryMontaFormulario);
            if($execQueryMontaFormulario) {

                if($opcaoSelecionada < 100 && $opcaoSelecionada <> 99){
                    $status = '1';
                    $montaFormulario = '<form id="formFormularioId'.$opcaoSelecionada.'" class="formFormularioSolicitacoes" attr-formOrdemExibicao="'.$execQueryMontaFormulario[0]['ordemExibicao'].'" attr-chamadoPor="'.$execQueryMontaFormulario[0]['chamadoPor'].'" '.$estiloDivsAbertas.'><p>'.$execQueryMontaFormulario[0]['etapaFormulario'].'</p>';
                    
                    for($i = 0; $i < sizeof($execQueryMontaFormulario); $i++){
                        $montaFormulario = $montaFormulario.'
                            <div class="radio-container">
                                <label for="radio'.$execQueryMontaFormulario[$i]['idOpcao'].'">
                                    <div style="width: 100%; display: flex; align-items: center;">
                                        <input type="radio" id="radio'.$execQueryMontaFormulario[$i]['idOpcao'].'" name="radio"></input>
                                        <div class="custom-radio">
                                            <span class="radioSpan Clicar" id="radioSpan'.$execQueryMontaFormulario[$i]['idOpcao'].'" attr-ordemExibicao="'.$execQueryMontaFormulario[$i]['ordemExibicao'].'" attr-formularioAtual="'.$execQueryMontaFormulario[$i]['idFormulario'].'" attr-proximoFormulario="'.$execQueryMontaFormulario[$i]['proximaEtapaFormulario'].'"></span>
                                        </div>
                                        <span style="width: 75%; margin-left: 2%; font-color=#646464;">
                                            '.$execQueryMontaFormulario[$i]['textoOpcao'].'
                                        </span>
                                        <div style="display: inline-flex;">
                                            '.$execQueryMontaFormulario[$i]['textoDuvida'].'
                                            '.$execQueryMontaFormulario[$i]['campoDuvida'].'
                                        </div>
                                    </div>
                                </label>
                            </div>
                        ';
                    }
                } else if($opcaoSelecionada == 99){
                    $status = '1';
                    $montaFormulario = '<form id="formFormularioId'.$opcaoSelecionada.'" class="formFormularioSolicitacoes" attr-chamadoPor="'.$execQueryMontaFormulario[0]['chamadoPor'].'" '.$estiloDivsAbertas.'>'.$execQueryMontaFormulario[0]['etapaFormulario'];
                } else {
                    $status = '2';
                    $montaFormulario = '<form id="formFormularioId'.$opcaoSelecionada.'" class="formFormularioSolicitacoes" attr-chamadoPor="'.$execQueryMontaFormulario[0]['chamadoPor'].'" '.$estiloDivsAbertas.'>'.$execQueryMontaFormulario[0]['etapaFormulario'];
                }
            } 
            $retorno['status'] = $status;
            $retorno['mensagem'] = $montaFormulario.'</form>'.$scriptTooltip;
        } catch(Exception $e) {
            $status = '0';
            $informacoesErro = "erro: " . $e . "\n\\n\$queryMontaFormulario:" . $queryMontaFormulario;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "montaFormulario", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível montar os formulários para preenchimento. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function montaTabelaAcompanhamentoVisaoGestor($dependencia){
        $retorno = array();
        $db = New Database('solicitacoes');
        $mat = $_SESSION['matricula'];
        
        $queryMontaTabela = "
            SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema, date_format(a.timestamp, '%d/%m/%Y') as dataFormatada FROM solicitacoes.solicitacoes a
                LEFT JOIN solicitacoes.status b ON a.status = b.id
                LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
                LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao
                WHERE prefixo = '".$dependencia."';";

        $retorno = array();
        try {
            $execQueryConsultaSolicitacoes = $db->DbGetAll($queryMontaTabela); 

            if(sizeof($execQueryConsultaSolicitacoes) > 0){
                $dadosTabelaAcompanhamento = '';
                for($i = 0; $i < (sizeof($execQueryConsultaSolicitacoes)); $i++){
                    $iconeEditar='';
                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '1'){
                        $iconeEditar = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M16.8177 10.5099L9.78741 17.5422L14.4586 22.212L21.4888 15.1797L16.8177 10.5099Z" fill="#AEAEAE"/>
                                <path d="M22.6494 14.0226L23.2402 13.4326C24.5276 12.1452 24.5276 10.0496 23.2402 8.76144C21.9528 7.47405 19.8564 7.47405 18.569 8.76144L17.9791 9.35221L22.6494 14.0226Z" fill="#AEAEAE"/>
                                <path d="M13.0462 23.1221L8.8156 24.1789C8.5358 24.2478 8.2396 24.1666 8.03611 23.9631C7.83262 23.7596 7.75057 23.4634 7.82031 23.1844L8.87795 18.9538L13.0462 23.1221Z" fill="#AEAEAE"/>
                                <path d="M28.4444 3.55556V28.4444H3.55556V3.55556H28.4444ZM28.4444 0H3.55556C1.6 0 0 1.6 0 3.55556V28.4444C0 30.4 1.6 32 3.55556 32H28.4444C30.4 32 32 30.4 32 28.4444V3.55556C32 1.6 30.4 0 28.4444 0Z" fill="#AEAEAE"/>
                            </svg>
                        ';
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"/>
                                <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '2'){
                        //Tag em análise
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"/>
                                <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '3'){
                        //Tag  Aprovada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"/>
                                <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"/>
                            </svg>
                        ';
                    }

                    if($execQueryConsultaSolicitacoes[$i]['codStatus'] == '4'){
                        //Tag  Encerrada
                        $tagStatus = '
                            <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                                <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                                <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"/>
                                <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"/>
                            </svg>
                        ';
                    }

                    $dadosTabelaAcompanhamento = $dadosTabelaAcompanhamento.'
                    <tr>
                        <td>#'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['tema'].'</td>
                        <td>'.$execQueryConsultaSolicitacoes[$i]['dataFormatada'].'</td>
                        <td><div class="statusSolicitacao">'.$tagStatus.'</div></td>
                        <td id="iconeEditar" class="Clicar" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'">'.$iconeEditar.'</td>
                        <td id="iconeNavega" class="Clicar" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/navegacaoBtn.png" attr-idSolicitacao="'.$execQueryConsultaSolicitacoes[$i]['idSolicitacao'].'" class="acessarSolicitacao">
                        </td>
                    </tr>';
                }
                $retorno['status'] = '1';
                $retorno['mensagem'] = $dadosTabelaAcompanhamento;
            }
        } catch(Exception $e) {
            $informacoesErro = "erro: " . $e . "\n\\n\$queryMontaTabela:" . $queryMontaTabela;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "contaNovasSolicitacoes", $informacoesErro, $mat);
            $retorno = "Não foi possível verificar se há novas solicitações. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function gravaJornadaTranascional($tipoSolicitacao, $temaProduto, $canalTransacao, $assuntoTransacao, $objetivoTransacao, $canaisExistentes, $publicoAlvo, $metricaSucesso, $acompanhamentoMetrica, $resultadoProjetado, $estimuloConsumoTransacao, $raOuRegulatorio, $especificoWhatsapp){
        $db = New Database("solicitacoes");
        $retorno = array();
        $mat = $_SESSION['matricula'];
        
        $queryIncluiRegistroSolicitacao = "
            INSERT INTO `solicitacoes`.`solicitacoes` (
                `tipoSolicitacao`, 
                `matricula`, 
                `nome`, 
                `email`, 
                `dependencia`, 
                `prefixo`
            ) VALUES (
                '".$tipoSolicitacao."', 
                '".$_SESSION['matricula']."', 
                '".$_SESSION['nome']."', 
                '".$_SESSION['email']."', 
                NULL, 
                '".$_SESSION['dependencia']."'
            );
        ";

        try {
            $execQueryRegistraSolicitacao = $db->DbQuery($queryIncluiRegistroSolicitacao);
        
            if($execQueryRegistraSolicitacao){

                $queryConsultaUltimoId = "SELECT idSolicitacao FROM solicitacoes.solicitacoes ORDER BY idSolicitacao DESC LIMIT 1;";
                
                try {
                    if($especificoWhatsapp == 'undefined'){
                        $especificoWhatsapp = 'nao';
                    }
                    $execConsultaUltimoId = $db->DbGetAll($queryConsultaUltimoId);

                    if($execConsultaUltimoId){
                        $queryIncluiRespostas = "
                            INSERT INTO `solicitacoes`.`respostasJornadasTransacionais` (
                                `idSolicitacao`,
                                `temaProduto`, 
                                `canalTransacao`, 
                                `raOuRegulatorio`, 
                                `especificoWhatsapp`, 
                                `assuntoTransacao`, 
                                `objetivoTransacao`, 
                                `canaisTransacaoExiste`, 
                                `publicoAlvo`, 
                                `metricaSucesso`, 
                                `resultadoProjetado`, 
                                `acompanhamentoMetrica`, 
                                `estimuloConsumoTransacao`
                            ) VALUES (
                                '".$execConsultaUltimoId[0]['idSolicitacao']."',
                                '".$temaProduto."', 
                                '".$canalTransacao."',
                                '".$raOuRegulatorio."',
                                '".$especificoWhatsapp."',
                                '".$assuntoTransacao."',
                                '".$objetivoTransacao."',
                                '".$canaisExistentes."',
                                '".$publicoAlvo."',
                                '".$metricaSucesso."',
                                '".$resultadoProjetado."',
                                '".$acompanhamentoMetrica."',
                                '".$estimuloConsumoTransacao."'
                            );"
                        ;
                        try {
                            $execQueryIncluiRespostas = $db->DbQuery($queryIncluiRespostas);
            
                            if($execQueryIncluiRespostas){
                                $retorno['status'] = "1";
                                $retorno['mensagem'] = "Solicitação #".$execConsultaUltimoId[0]['idSolicitacao']." incluída com sucesso!";
                                $retorno['solicitacaoIncluida'] = $execConsultaUltimoId[0]['idSolicitacao'];
                            }
                        } catch (Exception $e){
                            $status = '0';
                            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRespostas:" . $queryIncluiRespostas;
                            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaTranascional", $informacoesErro, $mat);
                            $retorno['status'] = $status;
                            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                        }
                    }
                    
                } catch (Exception $e){
                    $status = '0';
                    $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRespostas:" . $queryIncluiRespostas;
                    $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaTranascional", $informacoesErro, $mat);
                    $retorno['status'] = $status;
                    $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                }
                
            }
        } catch (Exception $e){
            $status = '0';
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRegistroSolicitacao:" . $queryIncluiRegistroSolicitacao;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaTranascional", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally{
            return $retorno;
        }
    }

    public function gravaJornadaInformacional($canalTransacao, $atendeRa, $especificoWhatsapp, $assuntoJornada, $objetivoTransacao, $metricaSucesso, $resultadoProjetado, $acompanhamentoMetrica, $estimuloConsumoTransacao, $tipoSolicitacao){
        global $mat;
        $db = New Database("solicitacoes");
        $retorno = array();
        
        $queryIncluiRegistroSolicitacao = "
            INSERT INTO `solicitacoes`.`solicitacoes` (
                `tipoSolicitacao`, 
                `matricula`, 
                `nome`, 
                `email`, 
                `dependencia`, 
                `prefixo`
            ) VALUES (
                '".$tipoSolicitacao."', 
                '".$_SESSION['matricula']."', 
                '".$_SESSION['nome']."', 
                '".$_SESSION['email']."', 
                NULL, 
                '".$_SESSION['dependencia']."'
            );
        ";

        try {
            $execQueryRegistraSolicitacao = $db->DbQuery($queryIncluiRegistroSolicitacao);
        
            if($execQueryRegistraSolicitacao){

                $queryConsultaUltimoId = "SELECT idSolicitacao FROM solicitacoes.solicitacoes ORDER BY idSolicitacao DESC LIMIT 1;";
                
                try {
                    if($especificoWhatsapp == 'undefined'){
                        $especificoWhatsapp = 'nao';
                    }
                    
                    $execConsultaUltimoId = $db->DbGetAll($queryConsultaUltimoId);

                    if($execConsultaUltimoId){
                        $queryIncluiRespostas = "
                            INSERT INTO `solicitacoes`.`respostasJornadasInformacionais` (
                                `idSolicitacao`, 
                                `canalTransacao`, 
                                `assuntoJornada`, 
                                `atendeRa`, 
                                `especificoWhatsapp`, 
                                `objetivoJornada`, 
                                `metricaSucesso`, 
                                `resultadoProjetado`, 
                                `acompanhamentoMetrica`, 
                                `estimuloConsumoTransacao`
                            ) VALUES (
                                '".$execConsultaUltimoId[0]['idSolicitacao']."', 
                                '".$canalTransacao."', 
                                '".$assuntoJornada."', 
                                '".$atendeRa."', 
                                '".$especificoWhatsapp."', 
                                '".$objetivoTransacao."', 
                                '".$metricaSucesso."', 
                                '".$resultadoProjetado."', 
                                '".$acompanhamentoMetrica."', 
                                '".$estimuloConsumoTransacao."'
                            );
                        ";
                        try {
                            $execQueryIncluiRespostas = $db->DbQuery($queryIncluiRespostas);
            
                            if($execQueryIncluiRespostas){
                                $retorno['status'] = "1";
                                $retorno['mensagem'] = "Solicitação #".$execConsultaUltimoId[0]['idSolicitacao']." incluída com sucesso!";
                                $retorno['solicitacaoIncluida'] = $execConsultaUltimoId[0]['idSolicitacao'];
                            }
                        } catch (Exception $e){
                            $status = '0';
                            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRespostas:" . $queryIncluiRespostas;
                            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaInformacional", $informacoesErro, $mat);
                            $retorno['status'] = $status;
                            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                        }
                    }
                } catch (Exception $e){
                    $status = '0';
                    $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaUltimoId:" . $queryConsultaUltimoId;
                    $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaInformacional", $informacoesErro, $mat);
                    $retorno['status'] = $status;
                    $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                }
            }
        } catch (Exception $e){
            $status = '0';
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryIncluiRegistroSolicitacao:" . $queryIncluiRegistroSolicitacao;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravaJornadaInformacional", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally{
            return $retorno;
        }
    }

    // Função que grava eventuais logs de erro de banco de dados em formato texto
    public function geraLogExcecao($nomeApp, $nomeFuncao, $informacoesAdicionais, $mat){
        $dateTime = date("Y-m-d")."_". date("H.i.s");
        $nomeArquivo = $dateTime . "_" . $mat . "_" . $nomeApp . "_" . $nomeFuncao .".txt";
        $caminhoArquivo = $this->caminhoLogErro . "/" . $nomeArquivo;

        $strDataHora = print_r(new DateTime(), true);
        $strRequest = print_r($_REQUEST, true);
        $strSession = print_r($_SESSION, true);
        
        $strArquivo = "data:\n" . $strDataHora . "\n\$_REQUEST:\n" . $strRequest . "\n\$_SESSION:\n" . $strSession . "\n\$informacoesAdicionais:\n" . $informacoesAdicionais;

        file_put_contents($caminhoArquivo, $strArquivo);
        chmod($caminhoArquivo, 0777);

        return $caminhoArquivo;
    }

    public function acessaDetalheSolicitacao ($idSolicitacao){
        global $mat;
        $divComentarioCad = '';
        $secaoComentarioIa = '';
        
        $db = New Database("solicitacoes");
    
        $queryConsultaStatusSolicitacoes = "SELECT 
                a.*, 
                a.status as codStatus, 
                b.status, 
                ifnull(c.assuntoJornada, d.temaProduto) as tema, 
                e.perguntaResposta, 
                e.timestampPerguntaResposta, 
                e.analiseInteligênciaArtificial, 
                e.timestampAnalise, 
                e.resumoDemanda, 
                e.classificacaoFinal, 
                e.justificativa,  
                e.resultadoFinal, 
                e.historia, 
                e.criteriosAceitacao, 
                e.cenariosTeste,
                f.parecerFinal 
            FROM solicitacoes.solicitacoes a 
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao
            LEFT JOIN solicitacoes.analiseInteligenciaArtificial e ON a.idSolicitacao = e.idSolicitacao
            LEFT JOIN solicitacoes.parecerFinalCad f ON a.idSolicitacao = f.idSolicitacao
            WHERE a.idSolicitacao = '".$idSolicitacao."'
        ";
    
        $execQueryConsultaStatusSolicitacoes = $db->DbGetAll($queryConsultaStatusSolicitacoes);
        
        $textoPerguntasRespostas = $execQueryConsultaStatusSolicitacoes[0]['perguntaResposta'];
        $perguntasRespostas = preg_replace('/<pergunta>/', '<div class="pergunta" style="font-weight: bold;">', $textoPerguntasRespostas);
        $perguntasRespostas = preg_replace('/<\/pergunta>/', '</div>', $perguntasRespostas);
        $perguntasRespostas = preg_replace('/<resposta>/', '<div class="resposta" style="margin-bottom: 10px;">', $perguntasRespostas);
        $perguntasRespostas = preg_replace('/<\/resposta>/', '</div><br><br>', $perguntasRespostas);
        
        if(sizeof($execQueryConsultaStatusSolicitacoes) > 0){
            
            $divTagStatus = '';

            //Status Nova
            if($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '1'){
                $divTagStatus = '<svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                    <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
                                    <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
                                    <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"></circle>
                                    <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"></path>
                                </svg>
                <span class="mensagemStatusNova"> Sua solicitação foi aberta e está aguardando ser analisada pelo CAD, altere as informações se necessário</span>';
            } 

            //Status Em análise
            if ($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '2'){
                $divTagStatus = '<svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                                    <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
                                    <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
                                    <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"></circle>
                                    <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"></path>
                                </svg>
                            <span class="mensagemStatusAnalise"> Sua Solicitação está sendo avaliada pelo CAD</span>';
            }

            if($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '3'){

                if($execQueryConsultaStatusSolicitacoes[0]['classificacaoFinal'] == " A "){
                    $secaoComentarioIa = '
                        <div class="secaoSugestaodaIA">
                            <div class= "tituloSugestaoIA">
                                <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/iconeRobo.png">
                                    Sugestão da IA para abrir a História
                            </div>
                            <div class="sugestaoDescricaoIA">
                                <div class="conteudoTextoDescricaoIA">
                                    <span class= "tituloCaixaSugestaoIA">Descrição</span><br><br>
                                       <div id="conteudosugestaoDescricaoIa"> '.$execQueryConsultaStatusSolicitacoes[0]['historia'].'</div>
                                </div>
                                <!--Icone para copiar-->
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" class = "Clicar" id="btnCopiaConteudo">
                                    <g id="Group">
                                        <g id="Group_2">
                                            <path id="Vector" d="M15.75 0H5.625C4.38244 0 3.375 1.00744 3.375 2.25H4.5C4.5 1.62928 5.00484 1.125 5.625 1.125H15.75C16.3707 1.125 16.875 1.62928 16.875 2.25V12.375C16.875 12.9957 16.3707 13.5 15.75 13.5V14.625C16.9926 14.625 18 13.6176 18 12.375V2.25C18 1.00744 16.9926 0 15.75 0ZM12.375 3.375H2.25C1.00744 3.375 0 4.38244 0 5.625V15.75C0 16.9926 1.00744 18 2.25 18H12.375C13.6176 18 14.625 16.9926 14.625 15.75V5.625C14.625 4.38244 13.6176 3.375 12.375 3.375ZM13.5 15.75C13.5 16.3707 12.9957 16.875 12.375 16.875H2.25C1.62984 16.875 1.125 16.3707 1.125 15.75V5.625C1.125 5.00428 1.62984 4.5 2.25 4.5H12.375C12.9957 4.5 13.5 5.00428 13.5 5.625V15.75ZM3.375 7.875H11.25V6.75H3.375V7.875ZM3.375 10.125H11.25V9H3.375V10.125ZM3.375 12.375H11.25V11.25H3.375V12.375ZM3.375 14.625H7.875V13.5H3.375V14.625Z" fill="#646464"/>
                                        </g>
                                    </g>
                                </svg>    

                            </div>
                            <div class="sugestaoDescricaoIA">
                                <div class="conteudoTextoDescricaoIA">
                                    <span class= "tituloCaixaSugestaoIA">Critério de aceitação</span><br><br>
                                        <p>
                                            <div id="conteudoSugestaoAceitacaoIA">'.$execQueryConsultaStatusSolicitacoes[0]['criteriosAceitacao'].'</div>
                                        </p>
                                </div>
                                <!--Icone para copiar-->
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" class = "Clicar" id="btnCopiaCriterioAceitacao">
                                    <g id="Group">
                                        <g id="Group_2">
                                            <path id="Vector" d="M15.75 0H5.625C4.38244 0 3.375 1.00744 3.375 2.25H4.5C4.5 1.62928 5.00484 1.125 5.625 1.125H15.75C16.3707 1.125 16.875 1.62928 16.875 2.25V12.375C16.875 12.9957 16.3707 13.5 15.75 13.5V14.625C16.9926 14.625 18 13.6176 18 12.375V2.25C18 1.00744 16.9926 0 15.75 0ZM12.375 3.375H2.25C1.00744 3.375 0 4.38244 0 5.625V15.75C0 16.9926 1.00744 18 2.25 18H12.375C13.6176 18 14.625 16.9926 14.625 15.75V5.625C14.625 4.38244 13.6176 3.375 12.375 3.375ZM13.5 15.75C13.5 16.3707 12.9957 16.875 12.375 16.875H2.25C1.62984 16.875 1.125 16.3707 1.125 15.75V5.625C1.125 5.00428 1.62984 4.5 2.25 4.5H12.375C12.9957 4.5 13.5 5.00428 13.5 5.625V15.75ZM3.375 7.875H11.25V6.75H3.375V7.875ZM3.375 10.125H11.25V9H3.375V10.125ZM3.375 12.375H11.25V11.25H3.375V12.375ZM3.375 14.625H7.875V13.5H3.375V14.625Z" fill="#646464"/>
                                        </g>
                                    </g>
                                </svg>    

                            </div>
                            <div class="sugestaoDescricaoIA">
                                <div class="conteudoTextoDescricaoIA">
                                    <span class= "tituloCaixaSugestaoIA">Cenário de teste</span><br><br>
                                    <div id="conteudoSugestaoCenarioTesteIA">'.$execQueryConsultaStatusSolicitacoes[0]['cenariosTeste'].'</div>
                                </div>
                                <!--Icone para copiar-->
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" class = "Clicar" id="btnCopiarCenarioTeste">
                                    <g id="Group">
                                        <g id="Group_2">
                                            <path id="Vector" d="M15.75 0H5.625C4.38244 0 3.375 1.00744 3.375 2.25H4.5C4.5 1.62928 5.00484 1.125 5.625 1.125H15.75C16.3707 1.125 16.875 1.62928 16.875 2.25V12.375C16.875 12.9957 16.3707 13.5 15.75 13.5V14.625C16.9926 14.625 18 13.6176 18 12.375V2.25C18 1.00744 16.9926 0 15.75 0ZM12.375 3.375H2.25C1.00744 3.375 0 4.38244 0 5.625V15.75C0 16.9926 1.00744 18 2.25 18H12.375C13.6176 18 14.625 16.9926 14.625 15.75V5.625C14.625 4.38244 13.6176 3.375 12.375 3.375ZM13.5 15.75C13.5 16.3707 12.9957 16.875 12.375 16.875H2.25C1.62984 16.875 1.125 16.3707 1.125 15.75V5.625C1.125 5.00428 1.62984 4.5 2.25 4.5H12.375C12.9957 4.5 13.5 5.00428 13.5 5.625V15.75ZM3.375 7.875H11.25V6.75H3.375V7.875ZM3.375 10.125H11.25V9H3.375V10.125ZM3.375 12.375H11.25V11.25H3.375V12.375ZM3.375 14.625H7.875V13.5H3.375V14.625Z" fill="#646464"/>
                                        </g>
                                    </g>
                                </svg>    
                            </div>
                        </div>
                    ';
                }

                $divTagStatus = '
                    <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                        <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
                        <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
                        <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"></circle>
                        <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"></path>
                    </svg>
                    <span class="mensagemStatusAprovada"> Sua solicitação foi aprovada</span>
                ';
    
                $divComentarioCad = '
                    <div class="divComentarioCadSolicitacaoEncerrada">
                        <div class = "iconeComentarioCAD" >
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" fill="none">
                                <path d="M20.3128 10.0209H21.9611V12.007H20.6308L17.0663 14.7875C16.8973 14.9186 16.6958 14.9862 16.4934 14.9862C16.2401 14.9862 15.9973 14.8815 15.8182 14.6953C15.6391 14.5091 15.5385 14.2565 15.5385 13.9931V12.007H14.5837V10.0209H16.4934C16.7466 10.0209 16.9895 10.1255 17.1686 10.3117C17.3476 10.498 17.4482 10.7506 17.4482 11.0139V12.007L19.7399 10.2195C19.9052 10.0906 20.1062 10.0209 20.3128 10.0209Z" fill="#646464"/>
                                <path d="M20.8337 10.0209H22.05V3.06949H12.5014V6.04865H10.5916V3.06949C10.5916 1.97414 11.4482 1.08337 12.5014 1.08337H22.05C23.1032 1.08337 23.9597 1.97414 23.9597 3.06949V10.0209C23.9597 11.1152 23.1032 12.007 22.05 12.007H20.8337V10.0209Z" fill="#646464"/>
                                <path d="M10.5941 6.6445V5.52504H12.5038V6.6445H10.5941Z" fill="#646464"/>
                                <path d="M9.37533 16.25C11.6722 16.25 13.542 14.3055 13.542 11.9167C13.542 9.52796 11.6722 7.58337 9.37533 7.58337C7.07845 7.58337 5.20866 9.52796 5.20866 11.9167C5.20866 14.3055 7.07845 16.25 9.37533 16.25Z" fill="#646464"/>
                                <path d="M9.37533 17.3334C4.46803 17.3334 1.04199 20.006 1.04199 23.8334V24.9167H17.7087V23.8334C17.7087 20.006 14.2826 17.3334 9.37533 17.3334Z" fill="#646464"/>
                            </svg>
                        </div>
                        <div class = "textoComentarioCAD" >
                            <span class="tituloComentarioCAD">Comentário do CAD: </span><br>
                            <span class= "textoComentarioCAD">'.$execQueryConsultaStatusSolicitacoes[0]['parecerFinal'].'</span>
                        </div>
                    </div>

                    '.$secaoComentarioIa.'

                    <div class= "secaoAbrirHistoria">
                        <div class="divConfiraChecklist">
                            <div class="imgTextoConfiraChecklist">
                                <svg xmlns="http://www.w3.org/2000/svg" width="57" height="58" viewBox="0 0 57 58" fill="none">
                                    <g clip-path="url(#clip0_6896_35888)">
                                        <path d="M57 29C57 45.0163 44.2396 58 28.5 58C12.7593 58 -3.93545e-06 45.0163 -2.53526e-06 29C-1.13507e-06 12.9837 12.7593 1.11545e-06 28.5 2.49155e-06C44.2396 3.86755e-06 57 12.9837 57 29Z" fill="#FC6E51"/>
                                        <path d="M33.1331 16.4269L39.3108 16.4269C39.8796 16.4269 40.3405 16.8965 40.3405 17.4748L40.3405 44.1921C40.3405 44.771 39.8796 45.24 39.3108 45.24L17.6875 45.24C17.1186 45.24 16.6577 44.771 16.6577 44.1922L16.6577 17.4748C16.6577 16.8965 17.1186 16.4269 17.6875 16.4269L23.8662 16.4269" fill="white"/>
                                        <path d="M39.3109 45.82L17.6877 45.82C16.8057 45.82 16.0879 45.0893 16.0879 44.1922L16.0879 17.4748C16.0879 16.5776 16.8058 15.8469 17.6877 15.8469L23.8664 15.8469L23.8664 17.0069L17.6877 17.0069C17.4342 17.0069 17.2279 17.2165 17.2279 17.4748L17.2279 44.1921C17.2279 44.4505 17.4342 44.66 17.6877 44.66L39.311 44.66C39.5643 44.66 39.7708 44.4504 39.7708 44.1922L39.7708 17.4748C39.7708 17.2165 39.5642 17.0069 39.3109 17.0069L33.1333 17.0069L33.1333 15.8469L39.3109 15.8469C40.1932 15.8469 40.9108 16.5776 40.9108 17.4748L40.9108 44.1921C40.9108 45.0893 40.1932 45.82 39.3109 45.82Z" fill="#454545"/>
                                        <path d="M32.1034 15.3791C32.1034 15.3791 30.5593 15.0381 30.5593 14.8557C30.5593 13.6974 29.6364 12.76 28.4997 12.76C27.3619 12.76 26.4401 13.6974 26.4401 14.8557C26.4401 15.0381 24.896 15.3791 24.896 15.3791C24.3271 15.3791 23.8662 15.8486 23.8662 16.4269L23.8662 18.5226C23.8662 19.1009 24.3271 19.5705 24.896 19.5705L32.1034 19.5705C32.6711 19.5705 33.1332 19.1009 33.1332 18.5226L33.1332 16.4269C33.1332 15.8487 32.6711 15.3791 32.1034 15.3791Z" fill="#FFB933"/>
                                        <path d="M32.1036 20.1505L24.8962 20.1505C24.0142 20.1505 23.2964 19.4198 23.2964 18.5226L23.2964 16.4269C23.2964 15.5524 23.9772 14.837 24.8277 14.8002C25.2321 14.7095 25.6501 14.5946 25.892 14.5114C26.0585 13.1983 27.1645 12.18 28.4999 12.18C29.8352 12.18 30.9413 13.1984 31.1078 14.5113C31.3496 14.5946 31.7676 14.7095 32.172 14.8002C33.0225 14.837 33.7033 15.5524 33.7033 16.4269L33.7033 18.5226C33.7033 19.4198 32.9855 20.1505 32.1036 20.1505ZM28.4999 13.34C27.6786 13.34 27.0103 14.0197 27.0103 14.8557C27.0103 15.3354 26.7092 15.5722 25.017 15.9455C24.9774 15.9545 24.9369 15.9591 24.8962 15.9591C24.6426 15.9591 24.4364 16.1687 24.4364 16.4269L24.4364 18.5226C24.4364 18.7809 24.6426 18.9905 24.8962 18.9905L32.1036 18.9905C32.3571 18.9905 32.5633 18.7809 32.5633 18.5226L32.5633 16.4269C32.5633 16.1686 32.3571 15.9591 32.1036 15.9591C32.0629 15.9591 32.0223 15.9545 31.9828 15.9455C30.2906 15.5722 29.9895 15.3354 29.9895 14.8557C29.9895 14.0197 29.3212 13.34 28.4999 13.34Z" fill="#454545"/>
                                        <path d="M21.0901 27.964C22.3493 27.964 23.3701 26.9253 23.3701 25.644C23.3701 24.3627 22.3493 23.324 21.0901 23.324C19.8309 23.324 18.8101 24.3627 18.8101 25.644C18.8101 26.9253 19.8309 27.964 21.0901 27.964Z" fill="#ACAF48"/>
                                        <path d="M21.0898 27.0441L19.5469 25.4741L20.3528 24.654L21.0899 25.4039L22.9668 23.494L23.7728 24.3141L21.0898 27.0441Z" fill="#454545"/>
                                        <path d="M21.0901 34.9241C22.3493 34.9241 23.3701 33.8854 23.3701 32.6041C23.3701 31.3228 22.3493 30.2841 21.0901 30.2841C19.8309 30.2841 18.8101 31.3228 18.8101 32.6041C18.8101 33.8854 19.8309 34.9241 21.0901 34.9241Z" fill="#ACAF48"/>
                                        <path d="M21.0898 34.0043L19.5469 32.4341L20.3528 31.6139L21.0899 32.3639L22.9668 30.4539L23.7728 31.2741L21.0899 34.0042L21.0898 34.0043Z" fill="#454545"/>
                                        <path d="M21.0901 41.884C22.3493 41.884 23.3701 40.8453 23.3701 39.564C23.3701 38.2827 22.3493 37.244 21.0901 37.244C19.8309 37.244 18.8101 38.2827 18.8101 39.564C18.8101 40.8453 19.8309 41.884 21.0901 41.884Z" fill="#ACAF48"/>
                                        <path d="M21.0898 40.9642L19.5469 39.3941L20.3528 38.5739L21.0899 39.3238L22.9668 37.4139L23.7728 38.2341L21.0899 40.9641L21.0898 40.9642ZM38.1898 25.0641L26.7898 25.0641L26.7898 23.9041L38.1898 23.9041L38.1898 25.0641ZM33.6298 27.3841L26.7898 27.3841L26.7898 26.2241L33.6298 26.2241L33.6298 27.3841ZM30.2098 32.0241L26.7898 32.0241L26.7898 30.8641L30.2098 30.8641L30.2098 32.0241ZM38.1898 32.0241L31.3498 32.0241L31.3498 30.8641L38.1898 30.8641L38.1898 32.0241ZM35.9098 34.3441L26.7898 34.3441L26.7898 33.1841L35.9098 33.1841L35.9098 34.3441Z" fill="#454545"/>
                                        <path d="M38.19 38.984L26.79 38.984L26.79 37.824L38.19 37.824L38.19 38.984Z" fill="#454545"/>
                                        <path d="M30.21 41.304L26.79 41.304L26.79 40.144L30.21 40.144L30.21 41.304Z" fill="#454545"/>
                                        <path d="M34.7701 41.304L31.3501 41.304L31.3501 40.144L34.7701 40.144L34.7701 41.304Z" fill="#454545"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_6896_35888">
                                        <rect width="57" height="58" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                                <div class="textoConfiraCheckist">
                                    Antes de abrir a história confira o checklist:<br> <span class="linkConfiraChecklistBold">Checklist jornada informacional</span>
                                </div>    
                            </div>
                            <div class="divBtnPesquisa divBtnMaisFiltros" id="btnAbrirHistoria">
                                        <input type="button" class="btnPersonalizar maisFiltros" value="Abrir história" id=""> 
                            </div>
                        <!--aqui vai o botão-->
                        </div>                        
                    </div>  
                ';
                
            }

            //Status Encerrada    
            if ($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '4'){
                
                $divTagStatus = '
                    <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
                        <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
                        <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
                        <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"></circle>
                        <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"></path>
                    </svg>
                    <span class="mensagemStatusEncerrada"> Sua solicitação foi encerrada</span>
                ';
                
                $divComentarioCad = '
                    <div class="divComentarioCadSolicitacaoEncerrada">
                        <div class = "iconeComentarioCAD" >
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" fill="none">
                                <path d="M20.3128 10.0209H21.9611V12.007H20.6308L17.0663 14.7875C16.8973 14.9186 16.6958 14.9862 16.4934 14.9862C16.2401 14.9862 15.9973 14.8815 15.8182 14.6953C15.6391 14.5091 15.5385 14.2565 15.5385 13.9931V12.007H14.5837V10.0209H16.4934C16.7466 10.0209 16.9895 10.1255 17.1686 10.3117C17.3476 10.498 17.4482 10.7506 17.4482 11.0139V12.007L19.7399 10.2195C19.9052 10.0906 20.1062 10.0209 20.3128 10.0209Z" fill="#646464"/>
                                <path d="M20.8337 10.0209H22.05V3.06949H12.5014V6.04865H10.5916V3.06949C10.5916 1.97414 11.4482 1.08337 12.5014 1.08337H22.05C23.1032 1.08337 23.9597 1.97414 23.9597 3.06949V10.0209C23.9597 11.1152 23.1032 12.007 22.05 12.007H20.8337V10.0209Z" fill="#646464"/>
                                <path d="M10.5941 6.6445V5.52504H12.5038V6.6445H10.5941Z" fill="#646464"/>
                                <path d="M9.37533 16.25C11.6722 16.25 13.542 14.3055 13.542 11.9167C13.542 9.52796 11.6722 7.58337 9.37533 7.58337C7.07845 7.58337 5.20866 9.52796 5.20866 11.9167C5.20866 14.3055 7.07845 16.25 9.37533 16.25Z" fill="#646464"/>
                                <path d="M9.37533 17.3334C4.46803 17.3334 1.04199 20.006 1.04199 23.8334V24.9167H17.7087V23.8334C17.7087 20.006 14.2826 17.3334 9.37533 17.3334Z" fill="#646464"/>
                            </svg>
                        </div>
                        <div class = "textoComentarioCAD" >
                            <span class="tituloComentarioCAD">Comentário do CAD: </span><br>
                            <span class= "textoComentarioCAD">'.$execQueryConsultaStatusSolicitacoes[0]['parecerFinal'].'</span>
                        </div>
                    </div>
                ';            
            } 
    
            $paginaDeConsultaSolicitacao = '
                <div class="divConsultaDetalheSolicitacao">
                    <div class= "cabecalhoAbaConsultaSolicitacao">
                        <div class="voltaIDCabecalho">
                            <svg class = "btnVoltaParaTabelaSolicitacoes Clicar"xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M8.707 7.29309L4 12.0001L8.707 16.7071L10.121 15.2931L7.828 13.0001H19.414V11.0001L7.828 11.0001L10.121 8.70709L8.707 7.29309Z" fill="#2D37F5"/>
                            </svg>
                            <span class = "textoVoltarDetalheSolicitacao btnVoltaParaTabelaSolicitacoes Clicar">Voltar</span> <span class ="idCabecalhoDetalheSolicitacao"> / ID #'.$idSolicitacao.' </span >
                        </div>
                        <span class="temaProdutoDetalheSolicitacao">'.$execQueryConsultaStatusSolicitacoes[0]['tipoSolicitacao'].' - '.$execQueryConsultaStatusSolicitacoes[0]['tema'].'</span>
                        <div class="detalheStatusConsultaSolicitacao">
                            '.$divTagStatus.'
                        </div>
                    </div>
                    <div class= "linhaDivisoria" style = "margin-top:5%;"></div>
                    
                    '.$divComentarioCad.'
                                        
                    <div class="divDadosdaSolicitacao">
                        <div class="divTituloSecaoDadosDaSolicitacao">
                            Dados da solicitação
                            <!--Icon chevron up-->
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z" fill="#2D37F5"/>
                            </svg>
                        </div>
                        <div class="conteudoSolicitacao">
                            '.$perguntasRespostas.'
                        </div>
                    </div>
                </div>
            ';
        }
    
        $retorno['status'] = '1';
        $retorno['mensagem'] = $paginaDeConsultaSolicitacao;
        
        return $retorno;
    
    }
    

    // public function acessaDetalheSolicitacao ($idSolicitacao){
    //     global $mat;
    //     $idSolicitacao = $idSolicitacao;

    //     $db = New Database("solicitacoes");
        





    //     /* Montagem da pagina seguindo*/

    //     $queryConsultaStatusSolicitacoes = " SELECT solicitacoes.status as codStatus from solicitacoes.solicitacoes WHERE idSolicitacao = '".$idSolicitacao."';
    //      ";

    //      //try{
    //         $execQueryConsultaStatusSolicitacoes = $db->DbGetAll($queryConsultaStatusSolicitacoes);
            
    //         if(sizeof($execQueryConsultaStatusSolicitacoes) > 0){
    //             for($i = 0; $i < (sizeof($execQueryConsultaStatusSolicitacoes)); $i++){
    //                 if($execQueryConsultaStatusSolicitacoes [$i]['codStatus'] == '1' or $execQueryConsultaStatusSolicitacoes [$i]['codStatus']== '2' or $execQueryConsultaStatusSolicitacoes [$i]['codStatus']== '4')
    //                 {   
    //                     $divTagStatus = '';
                        
    //                     //Status Nova
    //                     if($execQueryConsultaStatusSolicitacoes [$i]['codStatus'] == '1'){
    //                         $divTagStatus = '<svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
    //                                             <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
    //                                             <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
    //                                             <circle cx="31.9997" cy="12" r="2.66667" fill="#4668FF"></circle>
    //                                             <path d="M44.66 17H43.05V7.256H44.562L49.476 14.2V7.256H51.086V17H49.56L44.66 10.042V17ZM56.5269 17.112C55.8362 17.112 55.2015 16.944 54.6229 16.608C54.0535 16.272 53.6009 15.8147 53.2649 15.236C52.9382 14.648 52.7749 14.004 52.7749 13.304C52.7749 12.604 52.9382 11.9647 53.2649 11.386C53.6009 10.798 54.0535 10.336 54.6229 10C55.2015 9.664 55.8362 9.496 56.5269 9.496C57.2175 9.496 57.8475 9.664 58.4169 10C58.9955 10.336 59.4482 10.798 59.7749 11.386C60.1109 11.9647 60.2789 12.604 60.2789 13.304C60.2789 14.004 60.1109 14.648 59.7749 15.236C59.4482 15.8147 58.9955 16.272 58.4169 16.608C57.8475 16.944 57.2175 17.112 56.5269 17.112ZM56.5269 15.642C56.9282 15.642 57.2875 15.544 57.6049 15.348C57.9315 15.1427 58.1835 14.8627 58.3609 14.508C58.5475 14.144 58.6409 13.7427 58.6409 13.304C58.6409 12.8653 58.5475 12.4687 58.3609 12.114C58.1835 11.7593 57.9315 11.484 57.6049 11.288C57.2875 11.0827 56.9282 10.98 56.5269 10.98C55.9109 10.98 55.4022 11.1993 55.0009 11.638C54.6089 12.0767 54.4129 12.632 54.4129 13.304C54.4129 13.976 54.6089 14.536 55.0009 14.984C55.4022 15.4227 55.9109 15.642 56.5269 15.642ZM65.431 17H63.555L60.615 9.622H62.435L64.535 15.334L66.607 9.622H68.371L65.431 17ZM71.9893 9.496C72.9506 9.496 73.6973 9.762 74.2293 10.294C74.7706 10.8167 75.0413 11.5633 75.0413 12.534V17H73.5853V15.866C73.3613 16.23 73.0393 16.5287 72.6193 16.762C72.2086 16.9953 71.7233 17.112 71.1633 17.112C70.51 17.112 69.9826 16.9347 69.5813 16.58C69.18 16.2253 68.9793 15.7493 68.9793 15.152C68.9793 14.592 69.1333 14.13 69.4413 13.766C69.7493 13.3927 70.23 13.0987 70.8833 12.884C71.546 12.6693 72.4233 12.5107 73.5153 12.408V12.338C73.5153 11.89 73.3846 11.5447 73.1233 11.302C72.8713 11.05 72.4746 10.924 71.9333 10.924C71.1586 10.924 70.384 11.1433 69.6093 11.582L69.2593 10.238C70.146 9.74333 71.056 9.496 71.9893 9.496ZM71.4713 15.852C71.826 15.852 72.162 15.7633 72.4793 15.586C72.7966 15.4087 73.0486 15.166 73.2353 14.858C73.422 14.55 73.5153 14.2093 73.5153 13.836V13.556C72.4886 13.64 71.728 13.794 71.2333 14.018C70.748 14.2327 70.5053 14.5453 70.5053 14.956C70.5053 15.236 70.5893 15.4553 70.7573 15.614C70.9253 15.7727 71.1633 15.852 71.4713 15.852Z" fill="#4668FF"></path>
    //                                         </svg>
    //                         <span class="mensagemStatusNova"> Sua solicitação foi aberta e está aguardando ser analisada pelo CAD, altere as informações se necessário</span>';
    //                     } 
    //                     //Status Em análise
    //                     else if ($execQueryConsultaStatusSolicitacoes [$i]['codStatus'] == '2'){
    //                         $divTagStatus = '<svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
    //                                             <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
    //                                             <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
    //                                             <circle cx="11.9997" cy="12" r="2.66667" fill="#FFB31A"></circle>
    //                                             <path d="M29.798 17H23.05V7.256H29.658V8.796H24.646V11.274H28.958V12.8H24.646V15.46H29.798V17ZM31.3352 17V9.622H32.8192V10.798C33.0245 10.406 33.3138 10.0933 33.6872 9.86C34.0605 9.61733 34.4805 9.496 34.9472 9.496C35.4885 9.496 35.9458 9.61267 36.3192 9.846C36.7018 10.07 36.9912 10.3967 37.1872 10.826C37.7472 9.93933 38.5498 9.496 39.5952 9.496C40.4912 9.496 41.1632 9.80867 41.6112 10.434C42.0592 11.0593 42.2832 11.918 42.2832 13.01V17H40.6872V13.024C40.6872 12.3893 40.5892 11.8947 40.3932 11.54C40.1972 11.176 39.8285 10.994 39.2872 10.994C38.7925 10.994 38.3865 11.1573 38.0692 11.484C37.7612 11.8013 37.6072 12.2493 37.6072 12.828V17H36.0112V13.038C36.0112 12.4127 35.9132 11.918 35.7172 11.554C35.5212 11.1807 35.1572 10.994 34.6252 10.994C34.1305 10.994 33.7245 11.1853 33.4072 11.568C33.0992 11.9413 32.9452 12.4313 32.9452 13.038V17H31.3352ZM48.4802 17H46.7722L50.4682 7.256H52.3582L56.0542 17H54.2902L53.4222 14.62H49.3342L48.4802 17ZM51.3642 8.894L49.8102 13.262H52.9462L51.3642 8.894ZM57.4123 17V9.622H58.8963V10.798C59.1017 10.406 59.4003 10.0933 59.7923 9.86C60.1843 9.61733 60.651 9.496 61.1923 9.496C62.1257 9.496 62.8397 9.82733 63.3343 10.49C63.8383 11.1527 64.0903 12.0253 64.0903 13.108V17H62.4803V13.164C62.4803 12.4547 62.3403 11.918 62.0603 11.554C61.7897 11.1807 61.3837 10.994 60.8423 10.994C60.2917 10.994 59.8483 11.1807 59.5123 11.554C59.1857 11.9273 59.0223 12.422 59.0223 13.038V17H57.4123ZM68.5902 9.496C69.5516 9.496 70.2982 9.762 70.8302 10.294C71.3716 10.8167 71.6422 11.5633 71.6422 12.534V17H70.1862V15.866C69.9622 16.23 69.6402 16.5287 69.2202 16.762C68.8096 16.9953 68.3242 17.112 67.7642 17.112C67.1109 17.112 66.5836 16.9347 66.1822 16.58C65.7809 16.2253 65.5802 15.7493 65.5802 15.152C65.5802 14.592 65.7342 14.13 66.0422 13.766C66.3502 13.3927 66.8309 13.0987 67.4842 12.884C68.1469 12.6693 69.0242 12.5107 70.1162 12.408V12.338C70.1162 11.89 69.9856 11.5447 69.7242 11.302C69.4722 11.05 69.0756 10.924 68.5342 10.924C67.7596 10.924 66.9849 11.1433 66.2102 11.582L65.8602 10.238C66.7469 9.74333 67.6569 9.496 68.5902 9.496ZM68.0722 15.852C68.4269 15.852 68.7629 15.7633 69.0802 15.586C69.3976 15.4087 69.6496 15.166 69.8362 14.858C70.0229 14.55 70.1162 14.2093 70.1162 13.836V13.556C69.0896 13.64 68.3289 13.794 67.8342 14.018C67.3489 14.2327 67.1062 14.5453 67.1062 14.956C67.1062 15.236 67.1902 15.4553 67.3582 15.614C67.5262 15.7727 67.7642 15.852 68.0722 15.852ZM69.2342 8.558H67.7362L69.5842 6.262H71.5722L69.2342 8.558ZM75.8864 17.112C75.1304 17.112 74.5471 16.874 74.1364 16.398C73.7351 15.922 73.5344 15.2267 73.5344 14.312V6.5H75.1304V14.34C75.1304 14.76 75.2098 15.082 75.3684 15.306C75.5271 15.5207 75.7511 15.628 76.0404 15.628C76.2084 15.628 76.3531 15.614 76.4744 15.586C76.5958 15.5487 76.7264 15.4927 76.8664 15.418L77.2724 16.72C76.8711 16.9813 76.4091 17.112 75.8864 17.112ZM80.0956 17H78.4856V9.622H80.0956V17ZM79.2976 8.558C79.0083 8.558 78.7656 8.46467 78.5696 8.278C78.3736 8.082 78.2756 7.83933 78.2756 7.55C78.2756 7.27 78.3736 7.032 78.5696 6.836C78.7656 6.63067 79.0083 6.528 79.2976 6.528C79.5963 6.528 79.839 6.626 80.0256 6.822C80.2216 7.00867 80.3196 7.242 80.3196 7.522C80.3196 7.82067 80.2216 8.068 80.0256 8.264C79.839 8.46 79.5963 8.558 79.2976 8.558ZM84.3083 17.112C83.8416 17.112 83.3563 17.042 82.8523 16.902C82.3483 16.7527 81.947 16.5847 81.6483 16.398L82.0543 15.096C82.353 15.264 82.7123 15.4087 83.1323 15.53C83.5523 15.6513 83.9723 15.712 84.3923 15.712C84.747 15.712 85.0223 15.656 85.2183 15.544C85.4236 15.4227 85.5263 15.2407 85.5263 14.998C85.5263 14.746 85.4096 14.55 85.1763 14.41C84.9523 14.2607 84.5556 14.088 83.9863 13.892C83.2956 13.6493 82.7823 13.36 82.4463 13.024C82.1196 12.688 81.9563 12.2353 81.9563 11.666C81.9563 11.218 82.073 10.8307 82.3063 10.504C82.549 10.1773 82.871 9.93 83.2723 9.762C83.683 9.58467 84.131 9.496 84.6163 9.496C85.0176 9.496 85.419 9.55667 85.8203 9.678C86.2216 9.79933 86.5716 9.958 86.8703 10.154L86.4643 11.4C85.8576 11.064 85.251 10.896 84.6443 10.896C84.3083 10.896 84.033 10.9567 83.8183 11.078C83.6036 11.19 83.4963 11.372 83.4963 11.624C83.4963 11.8387 83.5943 12.0113 83.7903 12.142C83.9956 12.2727 84.313 12.4173 84.7423 12.576C85.5823 12.8933 86.1843 13.22 86.5483 13.556C86.9123 13.892 87.0943 14.3587 87.0943 14.956C87.0943 15.6373 86.8376 16.1693 86.3243 16.552C85.8203 16.9253 85.1483 17.112 84.3083 17.112ZM91.9794 17.112C91.2514 17.112 90.6028 16.9487 90.0334 16.622C89.4641 16.286 89.0208 15.8287 88.7034 15.25C88.3861 14.6713 88.2274 14.018 88.2274 13.29C88.2274 12.59 88.3768 11.9507 88.6754 11.372C88.9741 10.7933 89.3848 10.336 89.9074 10C90.4394 9.664 91.0368 9.496 91.6994 9.496C92.7261 9.496 93.5288 9.82733 94.1074 10.49C94.6954 11.1433 94.9894 12.058 94.9894 13.234V13.822H89.8374C89.9401 14.382 90.1921 14.8347 90.5934 15.18C90.9948 15.516 91.4894 15.684 92.0774 15.684C92.8521 15.684 93.5381 15.516 94.1354 15.18L94.4574 16.482C93.7761 16.902 92.9501 17.112 91.9794 17.112ZM93.3934 12.59C93.3654 12.0393 93.2068 11.61 92.9174 11.302C92.6281 10.9847 92.2221 10.826 91.6994 10.826C91.1768 10.826 90.7521 10.9847 90.4254 11.302C90.0988 11.6193 89.8981 12.0487 89.8234 12.59H93.3934Z" fill="#AD5F00"></path>
    //                                         </svg>
    //                                     <span class="mensagemStatusAnalise"> Sua Solicitação está sendo avaliada pelo CAD</span>';
    //                     } 
    //                     //Status Encerrada    
    //                     else if ($execQueryConsultaStatusSolicitacoes [$i]['codStatus'] == '4'){
                           
    //                         $divTagStatus = '<svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
    //                                             <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
    //                                             <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
    //                                             <circle cx="14.9997" cy="12" r="2.66667" fill="#E3111F"></circle>
    //                                             <path d="M32.798 17H26.05V7.256H32.658V8.796H27.646V11.274H31.958V12.8H27.646V15.46H32.798V17ZM34.3352 17V9.622H35.8192V10.798C36.0245 10.406 36.3232 10.0933 36.7152 9.86C37.1072 9.61733 37.5738 9.496 38.1152 9.496C39.0485 9.496 39.7625 9.82733 40.2572 10.49C40.7612 11.1527 41.0132 12.0253 41.0132 13.108V17H39.4032V13.164C39.4032 12.4547 39.2632 11.918 38.9832 11.554C38.7125 11.1807 38.3065 10.994 37.7652 10.994C37.2145 10.994 36.7712 11.1807 36.4352 11.554C36.1085 11.9273 35.9452 12.422 35.9452 13.038V17H34.3352ZM46.1431 17.112C45.4617 17.112 44.8457 16.9487 44.2951 16.622C43.7444 16.2953 43.3057 15.8427 42.9791 15.264C42.6617 14.6853 42.5031 14.0273 42.5031 13.29C42.5031 12.5807 42.6711 11.9367 43.0071 11.358C43.3431 10.7793 43.7911 10.3267 44.3511 10C44.9204 9.664 45.5411 9.496 46.2131 9.496C46.6144 9.496 46.9737 9.54267 47.2911 9.636C47.6177 9.72 47.9397 9.86 48.2571 10.056L47.8651 11.4C47.3891 11.12 46.8617 10.98 46.2831 10.98C45.6577 10.98 45.1444 11.19 44.7431 11.61C44.3417 12.03 44.1411 12.59 44.1411 13.29C44.1411 13.9993 44.3417 14.5687 44.7431 14.998C45.1444 15.4273 45.6484 15.642 46.2551 15.642C46.5817 15.642 46.8711 15.6 47.1231 15.516C47.3844 15.432 47.6504 15.3153 47.9211 15.166L48.3271 16.51C48.0004 16.7153 47.6644 16.8693 47.3191 16.972C46.9831 17.0653 46.5911 17.112 46.1431 17.112ZM52.9286 17.112C52.2006 17.112 51.5519 16.9487 50.9826 16.622C50.4132 16.286 49.9699 15.8287 49.6526 15.25C49.3352 14.6713 49.1766 14.018 49.1766 13.29C49.1766 12.59 49.3259 11.9507 49.6246 11.372C49.9232 10.7933 50.3339 10.336 50.8566 10C51.3886 9.664 51.9859 9.496 52.6486 9.496C53.6752 9.496 54.4779 9.82733 55.0566 10.49C55.6446 11.1433 55.9386 12.058 55.9386 13.234V13.822H50.7866C50.8892 14.382 51.1412 14.8347 51.5426 15.18C51.9439 15.516 52.4386 15.684 53.0266 15.684C53.8012 15.684 54.4872 15.516 55.0846 15.18L55.4066 16.482C54.7252 16.902 53.8992 17.112 52.9286 17.112ZM54.3426 12.59C54.3146 12.0393 54.1559 11.61 53.8666 11.302C53.5772 10.9847 53.1712 10.826 52.6486 10.826C52.1259 10.826 51.7012 10.9847 51.3746 11.302C51.0479 11.6193 50.8472 12.0487 50.7726 12.59H54.3426ZM57.5002 17V9.622H58.9842V10.798C59.1896 10.4247 59.4929 10.1213 59.8942 9.888C60.2956 9.65467 60.7716 9.538 61.3222 9.538C61.4436 9.538 61.5789 9.54733 61.7282 9.566C61.8869 9.57533 62.0036 9.594 62.0782 9.622L61.8262 11.148C61.5649 11.0827 61.3036 11.05 61.0422 11.05C60.5102 11.05 60.0529 11.2273 59.6702 11.582C59.2969 11.9367 59.1102 12.4313 59.1102 13.066V17H57.5002ZM63.5175 17V9.622H65.0015V10.798C65.2068 10.4247 65.5102 10.1213 65.9115 9.888C66.3128 9.65467 66.7888 9.538 67.3395 9.538C67.4608 9.538 67.5962 9.54733 67.7455 9.566C67.9042 9.57533 68.0208 9.594 68.0955 9.622L67.8435 11.148C67.5822 11.0827 67.3208 11.05 67.0595 11.05C66.5275 11.05 66.0702 11.2273 65.6875 11.582C65.3142 11.9367 65.1275 12.4313 65.1275 13.066V17H63.5175ZM71.8106 9.496C72.772 9.496 73.5186 9.762 74.0506 10.294C74.592 10.8167 74.8626 11.5633 74.8626 12.534V17H73.4066V15.866C73.1826 16.23 72.8606 16.5287 72.4406 16.762C72.03 16.9953 71.5446 17.112 70.9846 17.112C70.3313 17.112 69.804 16.9347 69.4026 16.58C69.0013 16.2253 68.8006 15.7493 68.8006 15.152C68.8006 14.592 68.9546 14.13 69.2626 13.766C69.5706 13.3927 70.0513 13.0987 70.7046 12.884C71.3673 12.6693 72.2446 12.5107 73.3366 12.408V12.338C73.3366 11.89 73.206 11.5447 72.9446 11.302C72.6926 11.05 72.296 10.924 71.7546 10.924C70.98 10.924 70.2053 11.1433 69.4306 11.582L69.0806 10.238C69.9673 9.74333 70.8773 9.496 71.8106 9.496ZM71.2926 15.852C71.6473 15.852 71.9833 15.7633 72.3006 15.586C72.618 15.4087 72.87 15.166 73.0566 14.858C73.2433 14.55 73.3366 14.2093 73.3366 13.836V13.556C72.31 13.64 71.5493 13.794 71.0546 14.018C70.5693 14.2327 70.3266 14.5453 70.3266 14.956C70.3266 15.236 70.4106 15.4553 70.5786 15.614C70.7466 15.7727 70.9846 15.852 71.2926 15.852ZM79.7508 17.112C79.1068 17.112 78.5235 16.958 78.0008 16.65C77.4875 16.3327 77.0862 15.8893 76.7968 15.32C76.5075 14.7507 76.3628 14.0973 76.3628 13.36C76.3628 12.6227 76.5075 11.96 76.7968 11.372C77.0955 10.784 77.5062 10.3267 78.0288 10C78.5515 9.67333 79.1348 9.51 79.7788 9.51C80.2735 9.51 80.7215 9.608 81.1228 9.804C81.5242 10 81.8508 10.2567 82.1028 10.574V6.5H83.6988V17H82.2148V15.768C81.9908 16.16 81.6642 16.482 81.2348 16.734C80.8055 16.986 80.3108 17.112 79.7508 17.112ZM79.9888 15.656C80.6048 15.656 81.1088 15.46 81.5008 15.068C81.9022 14.676 82.1028 14.1347 82.1028 13.444V13.206C82.1028 12.5153 81.9022 11.9693 81.5008 11.568C81.0995 11.1667 80.5955 10.966 79.9888 10.966C79.6342 10.966 79.3028 11.0593 78.9948 11.246C78.6962 11.4233 78.4535 11.6893 78.2668 12.044C78.0895 12.3987 78.0008 12.828 78.0008 13.332C78.0008 14.0693 78.1922 14.6433 78.5748 15.054C78.9575 15.4553 79.4288 15.656 79.9888 15.656ZM88.3295 9.496C89.2909 9.496 90.0375 9.762 90.5695 10.294C91.1109 10.8167 91.3815 11.5633 91.3815 12.534V17H89.9255V15.866C89.7015 16.23 89.3795 16.5287 88.9595 16.762C88.5489 16.9953 88.0635 17.112 87.5035 17.112C86.8502 17.112 86.3229 16.9347 85.9215 16.58C85.5202 16.2253 85.3195 15.7493 85.3195 15.152C85.3195 14.592 85.4735 14.13 85.7815 13.766C86.0895 13.3927 86.5702 13.0987 87.2235 12.884C87.8862 12.6693 88.7635 12.5107 89.8555 12.408V12.338C89.8555 11.89 89.7249 11.5447 89.4635 11.302C89.2115 11.05 88.8149 10.924 88.2735 10.924C87.4989 10.924 86.7242 11.1433 85.9495 11.582L85.5995 10.238C86.4862 9.74333 87.3962 9.496 88.3295 9.496ZM87.8115 15.852C88.1662 15.852 88.5022 15.7633 88.8195 15.586C89.1369 15.4087 89.3889 15.166 89.5755 14.858C89.7622 14.55 89.8555 14.2093 89.8555 13.836V13.556C88.8289 13.64 88.0682 13.794 87.5735 14.018C87.0882 14.2327 86.8455 14.5453 86.8455 14.956C86.8455 15.236 86.9295 15.4553 87.0975 15.614C87.2655 15.7727 87.5035 15.852 87.8115 15.852Z" fill="#E3111F"></path>
    //                                         </svg>
    //                                     <span class="mensagemStatusEncerrada"> Sua solicitação foi encerrada</span>';
                            
    //                         $divComentarioSolicitacaoEncerrada = '
    //                             <div class="divComentarioCadSolicitacaoEncerrada">
    //                                 <div class = "iconeComentarioCAD" >
    //                                     <svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" fill="none">
    //                                         <path d="M20.3128 10.0209H21.9611V12.007H20.6308L17.0663 14.7875C16.8973 14.9186 16.6958 14.9862 16.4934 14.9862C16.2401 14.9862 15.9973 14.8815 15.8182 14.6953C15.6391 14.5091 15.5385 14.2565 15.5385 13.9931V12.007H14.5837V10.0209H16.4934C16.7466 10.0209 16.9895 10.1255 17.1686 10.3117C17.3476 10.498 17.4482 10.7506 17.4482 11.0139V12.007L19.7399 10.2195C19.9052 10.0906 20.1062 10.0209 20.3128 10.0209Z" fill="#646464"/>
    //                                         <path d="M20.8337 10.0209H22.05V3.06949H12.5014V6.04865H10.5916V3.06949C10.5916 1.97414 11.4482 1.08337 12.5014 1.08337H22.05C23.1032 1.08337 23.9597 1.97414 23.9597 3.06949V10.0209C23.9597 11.1152 23.1032 12.007 22.05 12.007H20.8337V10.0209Z" fill="#646464"/>
    //                                         <path d="M10.5941 6.6445V5.52504H12.5038V6.6445H10.5941Z" fill="#646464"/>
    //                                         <path d="M9.37533 16.25C11.6722 16.25 13.542 14.3055 13.542 11.9167C13.542 9.52796 11.6722 7.58337 9.37533 7.58337C7.07845 7.58337 5.20866 9.52796 5.20866 11.9167C5.20866 14.3055 7.07845 16.25 9.37533 16.25Z" fill="#646464"/>
    //                                         <path d="M9.37533 17.3334C4.46803 17.3334 1.04199 20.006 1.04199 23.8334V24.9167H17.7087V23.8334C17.7087 20.006 14.2826 17.3334 9.37533 17.3334Z" fill="#646464"/>
    //                                     </svg>
    //                                 </div>
    //                                 <div class = "textoComentarioCAD" >
    //                                     <span class="tituloComentarioCAD">Comentário do CAD: </span><br>
    //                                     <span class= "textoComentarioCAD"> Solicitação não está alinhada aos direcionadores estratégicos definidos para o trimestre</span>
    //                                 </div>
    //                             </div>
    //                             ';            
    //                     } 




    //                     $paginaDeConsultaSolicitacao = '
    //                         <div class="divConsultaDetalheSolicitacao">
    //                             <div class= "cabecalhoAbaConsultaSolicitacao">
    //                                 <div class="voltaIDCabecalho">
    //                                     <svg class = "btnVoltaParaTabelaSolicitacoes Clicar" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    //                                         <path d="M8.707 7.29309L4 12.0001L8.707 16.7071L10.121 15.2931L7.828 13.0001H19.414V11.0001L7.828 11.0001L10.121 8.70709L8.707 7.29309Z" fill="#2D37F5"/>
    //                                     </svg>
    //                                     <span class = "textoVoltarDetalheSolicitacao  btnVoltaParaTabelaSolicitacoes Clicar">Voltar</span> <span class ="idCabecalhoDetalheSolicitacao"> / ID #'.$idSolicitacao.' </span >
    //                                 </div>
    //                                 <span class="temaProdutoDetalheSolicitacao">PIX</span>
    //                                 <div class="detalheStatusConsultaSolicitacao">
    //                                     '.$divTagStatus.'
    //                                 </div>
    //                                 <div class="detalheStatusConsultaSolicitacao">
                                        
    //                                 </div>
    //                                 <div class="detalheStatusConsultaSolicitacao">
                                        
    //                                 </div>
    //                             </div>
    //                             <div class= "linhaDivisoria" style = "margin-top:5%;"></div>
    //                             '.$divComentarioSolicitacaoEncerrada.'
    //                             <div class="divTituloSecaoDadosDaSolicitacao">
    //                                 Dados da solicitação
    //                                 <i class="fa fa-chevron-up iconeSetaDadosSolicitacao" aria-hidden="true"></i>
    //                             </div>   

    //                             <div class="divDadosdaSolicitacao">
                                   
    //                             </div>
    //                     </div>
    //                     ';
                        
    //                 } else if ($execQueryConsultaStatusSolicitacoes [$i]['codStatus'] == '3'){
    //                     $paginaDeConsultaSolicitacao = '
    //                     <div class="divConsultaDetalheSolicitacao">
    //                         <div class= "cabecalhoAbaConsultaSolicitacao">
    //                             <div class="voltaIDCabecalho">
    //                                 <svg class = "btnVoltaParaTabelaSolicitacoes Clicar"xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    //                                     <path d="M8.707 7.29309L4 12.0001L8.707 16.7071L10.121 15.2931L7.828 13.0001H19.414V11.0001L7.828 11.0001L10.121 8.70709L8.707 7.29309Z" fill="#2D37F5"/>
    //                                 </svg>
    //                                 <span class = "textoVoltarDetalheSolicitacao btnVoltaParaTabelaSolicitacoes Clicar">Voltar</span> <span class ="idCabecalhoDetalheSolicitacao"> / ID #'.$idSolicitacao.' </span >
    //                             </div>
    //                             <span class="temaProdutoDetalheSolicitacao">PIX</span>
    //                             <div class="detalheStatusConsultaSolicitacao">
    //                                 <svg xmlns="http://www.w3.org/2000/svg" width="104" height="24" viewBox="0 0 104 24" fill="none">
    //                                     <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" fill="#F0F2F4"></rect>
    //                                     <rect x="0.5" y="0.5" width="103" height="23" rx="11.5" stroke="#D4D8DD"></rect>
    //                                     <circle cx="16.4997" cy="12" r="2.66667" fill="#0C8A00"></circle>
    //                                     <path d="M28.53 17H26.822L30.518 7.256H32.408L36.104 17H34.34L33.472 14.62H29.384L28.53 17ZM31.414 8.894L29.86 13.262H32.996L31.414 8.894ZM37.4621 19.702V9.622H38.9461V10.826C39.1608 10.4527 39.4828 10.14 39.9121 9.888C40.3508 9.62667 40.8501 9.496 41.4101 9.496C42.0541 9.496 42.6328 9.65467 43.1461 9.972C43.6594 10.28 44.0608 10.7187 44.3501 11.288C44.6488 11.8573 44.7981 12.5107 44.7981 13.248C44.7981 13.9947 44.6488 14.6573 44.3501 15.236C44.0514 15.8147 43.6408 16.2673 43.1181 16.594C42.5954 16.9207 42.0121 17.084 41.3681 17.084C40.8734 17.084 40.4254 16.9907 40.0241 16.804C39.6321 16.608 39.3148 16.356 39.0721 16.048V19.702H37.4621ZM41.1721 15.628C41.5268 15.628 41.8534 15.5393 42.1521 15.362C42.4601 15.1847 42.7028 14.9187 42.8801 14.564C43.0668 14.2093 43.1601 13.7847 43.1601 13.29C43.1601 12.7953 43.0668 12.3753 42.8801 12.03C42.7028 11.6753 42.4648 11.4093 42.1661 11.232C41.8674 11.0547 41.5408 10.966 41.1861 10.966C40.5608 10.966 40.0521 11.162 39.6601 11.554C39.2681 11.946 39.0721 12.4873 39.0721 13.178V13.402C39.0721 14.102 39.2681 14.648 39.6601 15.04C40.0521 15.432 40.5561 15.628 41.1721 15.628ZM46.4188 17V9.622H47.9028V10.798C48.1082 10.4247 48.4115 10.1213 48.8128 9.888C49.2142 9.65467 49.6902 9.538 50.2408 9.538C50.3622 9.538 50.4975 9.54733 50.6468 9.566C50.8055 9.57533 50.9222 9.594 50.9968 9.622L50.7448 11.148C50.4835 11.0827 50.2222 11.05 49.9608 11.05C49.4288 11.05 48.9715 11.2273 48.5888 11.582C48.2155 11.9367 48.0288 12.4313 48.0288 13.066V17H46.4188ZM55.2626 17.112C54.5719 17.112 53.9372 16.944 53.3586 16.608C52.7892 16.272 52.3366 15.8147 52.0006 15.236C51.6739 14.648 51.5106 14.004 51.5106 13.304C51.5106 12.604 51.6739 11.9647 52.0006 11.386C52.3366 10.798 52.7892 10.336 53.3586 10C53.9372 9.664 54.5719 9.496 55.2626 9.496C55.9532 9.496 56.5832 9.664 57.1526 10C57.7312 10.336 58.1839 10.798 58.5106 11.386C58.8466 11.9647 59.0146 12.604 59.0146 13.304C59.0146 14.004 58.8466 14.648 58.5106 15.236C58.1839 15.8147 57.7312 16.272 57.1526 16.608C56.5832 16.944 55.9532 17.112 55.2626 17.112ZM55.2626 15.642C55.6639 15.642 56.0232 15.544 56.3406 15.348C56.6672 15.1427 56.9192 14.8627 57.0966 14.508C57.2832 14.144 57.3766 13.7427 57.3766 13.304C57.3766 12.8653 57.2832 12.4687 57.0966 12.114C56.9192 11.7593 56.6672 11.484 56.3406 11.288C56.0232 11.0827 55.6639 10.98 55.2626 10.98C54.6466 10.98 54.1379 11.1993 53.7366 11.638C53.3446 12.0767 53.1486 12.632 53.1486 13.304C53.1486 13.976 53.3446 14.536 53.7366 14.984C54.1379 15.4227 54.6466 15.642 55.2626 15.642ZM64.1667 17H62.2907L59.3507 9.622H61.1707L63.2707 15.334L65.3427 9.622H67.1067L64.1667 17ZM70.725 9.496C71.6863 9.496 72.433 9.762 72.965 10.294C73.5063 10.8167 73.777 11.5633 73.777 12.534V17H72.321V15.866C72.097 16.23 71.775 16.5287 71.355 16.762C70.9443 16.9953 70.459 17.112 69.899 17.112C69.2457 17.112 68.7183 16.9347 68.317 16.58C67.9157 16.2253 67.715 15.7493 67.715 15.152C67.715 14.592 67.869 14.13 68.177 13.766C68.485 13.3927 68.9657 13.0987 69.619 12.884C70.2817 12.6693 71.159 12.5107 72.251 12.408V12.338C72.251 11.89 72.1203 11.5447 71.859 11.302C71.607 11.05 71.2103 10.924 70.669 10.924C69.8943 10.924 69.1197 11.1433 68.345 11.582L67.995 10.238C68.8817 9.74333 69.7917 9.496 70.725 9.496ZM70.207 15.852C70.5617 15.852 70.8977 15.7633 71.215 15.586C71.5323 15.4087 71.7843 15.166 71.971 14.858C72.1577 14.55 72.251 14.2093 72.251 13.836V13.556C71.2243 13.64 70.4637 13.794 69.969 14.018C69.4837 14.2327 69.241 14.5453 69.241 14.956C69.241 15.236 69.325 15.4553 69.493 15.614C69.661 15.7727 69.899 15.852 70.207 15.852ZM78.6652 17.112C78.0212 17.112 77.4379 16.958 76.9152 16.65C76.4019 16.3327 76.0005 15.8893 75.7112 15.32C75.4219 14.7507 75.2772 14.0973 75.2772 13.36C75.2772 12.6227 75.4219 11.96 75.7112 11.372C76.0099 10.784 76.4205 10.3267 76.9432 10C77.4659 9.67333 78.0492 9.51 78.6932 9.51C79.1879 9.51 79.6359 9.608 80.0372 9.804C80.4385 10 80.7652 10.2567 81.0172 10.574V6.5H82.6132V17H81.1292V15.768C80.9052 16.16 80.5785 16.482 80.1492 16.734C79.7199 16.986 79.2252 17.112 78.6652 17.112ZM78.9032 15.656C79.5192 15.656 80.0232 15.46 80.4152 15.068C80.8165 14.676 81.0172 14.1347 81.0172 13.444V13.206C81.0172 12.5153 80.8165 11.9693 80.4152 11.568C80.0139 11.1667 79.5099 10.966 78.9032 10.966C78.5485 10.966 78.2172 11.0593 77.9092 11.246C77.6105 11.4233 77.3679 11.6893 77.1812 12.044C77.0039 12.3987 76.9152 12.828 76.9152 13.332C76.9152 14.0693 77.1065 14.6433 77.4892 15.054C77.8719 15.4553 78.3432 15.656 78.9032 15.656ZM87.2439 9.496C88.2053 9.496 88.9519 9.762 89.4839 10.294C90.0253 10.8167 90.2959 11.5633 90.2959 12.534V17H88.8399V15.866C88.6159 16.23 88.2939 16.5287 87.8739 16.762C87.4633 16.9953 86.9779 17.112 86.4179 17.112C85.7646 17.112 85.2373 16.9347 84.8359 16.58C84.4346 16.2253 84.2339 15.7493 84.2339 15.152C84.2339 14.592 84.3879 14.13 84.6959 13.766C85.0039 13.3927 85.4846 13.0987 86.1379 12.884C86.8006 12.6693 87.6779 12.5107 88.7699 12.408V12.338C88.7699 11.89 88.6393 11.5447 88.3779 11.302C88.1259 11.05 87.7293 10.924 87.1879 10.924C86.4133 10.924 85.6386 11.1433 84.8639 11.582L84.5139 10.238C85.4006 9.74333 86.3106 9.496 87.2439 9.496ZM86.7259 15.852C87.0806 15.852 87.4166 15.7633 87.7339 15.586C88.0513 15.4087 88.3033 15.166 88.4899 14.858C88.6766 14.55 88.7699 14.2093 88.7699 13.836V13.556C87.7433 13.64 86.9826 13.794 86.4879 14.018C86.0026 14.2327 85.7599 14.5453 85.7599 14.956C85.7599 15.236 85.8439 15.4553 86.0119 15.614C86.1799 15.7727 86.4179 15.852 86.7259 15.852Z" fill="#0C8A00"></path>
    //                                 </svg>
    //                                 <span class="mensagemStatusAprovada"> Sua solicitação foi aprovada</span>
    //                             </div>
    //                         </div>
    //                         <div class= "linhaDivisoria" style = "margin-top:5%;"></div>
    //                         <div class="divComentarioCadSolicitacaoEncerrada">
    //                             <div class = "iconeComentarioCAD" >
    //                             <svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" fill="none">
    //                                 <path d="M20.3128 10.0209H21.9611V12.007H20.6308L17.0663 14.7875C16.8973 14.9186 16.6958 14.9862 16.4934 14.9862C16.2401 14.9862 15.9973 14.8815 15.8182 14.6953C15.6391 14.5091 15.5385 14.2565 15.5385 13.9931V12.007H14.5837V10.0209H16.4934C16.7466 10.0209 16.9895 10.1255 17.1686 10.3117C17.3476 10.498 17.4482 10.7506 17.4482 11.0139V12.007L19.7399 10.2195C19.9052 10.0906 20.1062 10.0209 20.3128 10.0209Z" fill="#646464"/>
    //                                 <path d="M20.8337 10.0209H22.05V3.06949H12.5014V6.04865H10.5916V3.06949C10.5916 1.97414 11.4482 1.08337 12.5014 1.08337H22.05C23.1032 1.08337 23.9597 1.97414 23.9597 3.06949V10.0209C23.9597 11.1152 23.1032 12.007 22.05 12.007H20.8337V10.0209Z" fill="#646464"/>
    //                                 <path d="M10.5941 6.6445V5.52504H12.5038V6.6445H10.5941Z" fill="#646464"/>
    //                                 <path d="M9.37533 16.25C11.6722 16.25 13.542 14.3055 13.542 11.9167C13.542 9.52796 11.6722 7.58337 9.37533 7.58337C7.07845 7.58337 5.20866 9.52796 5.20866 11.9167C5.20866 14.3055 7.07845 16.25 9.37533 16.25Z" fill="#646464"/>
    //                                 <path d="M9.37533 17.3334C4.46803 17.3334 1.04199 20.006 1.04199 23.8334V24.9167H17.7087V23.8334C17.7087 20.006 14.2826 17.3334 9.37533 17.3334Z" fill="#646464"/>
    //                             </svg>
    //                             </div>
    //                             <div class = "textoComentarioCAD" >
    //                                 <span class="tituloComentarioCAD">Comentário do CAD: </span><br>
    //                                 <span class= "textoComentarioCAD"> Sua solicitação está alinhada aos direcionadores estratégicos</span>
    //                             </div>
    //                         </div>
    //                         <div class="secaoSugestaodaIA">
    //                             <div class= "tituloSugestaoIA">
    //                                 <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/iconeRobo.png">
    //                                     Sugestão da IA para abrir a História
    //                             </div>
    //                             <div class="sugestaoDescricaoIA">
    //                                 <div class="conteudoTextoDescricaoIA">
    //                                     <span class= "tituloCaixaSugestaoIA">Descrição</span><br><br>
    //                                         SENDO UM Analista do CAD QUERO QUE seja desenvolvida a página "Nova solicitação" > "Incluir solicitação" e "Acompanhar solicitação" PARA QUE os Gestores possam incluir e consultar novas solicitações de jornadas nos assistentes virtuais. 
                                            
    //                                         Ganhos esperados: Na V.1: Padronização da esteira de entradas de demandas no CAD antes da abertura de histórias para avaliação negocial. 
                                            
    //                                         Posteriormente será aberta história para a V.2, com utilização de IA generativa para análise das demandas e pontuação.
    //                                 </div>
    //                                 <!--Icone para copiar-->
    //                                 <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" class = "Clicar">
    //                                     <g id="Group">
    //                                     <g id="Group_2">
    //                                         <path id="Vector" d="M15.75 0H5.625C4.38244 0 3.375 1.00744 3.375 2.25H4.5C4.5 1.62928 5.00484 1.125 5.625 1.125H15.75C16.3707 1.125 16.875 1.62928 16.875 2.25V12.375C16.875 12.9957 16.3707 13.5 15.75 13.5V14.625C16.9926 14.625 18 13.6176 18 12.375V2.25C18 1.00744 16.9926 0 15.75 0ZM12.375 3.375H2.25C1.00744 3.375 0 4.38244 0 5.625V15.75C0 16.9926 1.00744 18 2.25 18H12.375C13.6176 18 14.625 16.9926 14.625 15.75V5.625C14.625 4.38244 13.6176 3.375 12.375 3.375ZM13.5 15.75C13.5 16.3707 12.9957 16.875 12.375 16.875H2.25C1.62984 16.875 1.125 16.3707 1.125 15.75V5.625C1.125 5.00428 1.62984 4.5 2.25 4.5H12.375C12.9957 4.5 13.5 5.00428 13.5 5.625V15.75ZM3.375 7.875H11.25V6.75H3.375V7.875ZM3.375 10.125H11.25V9H3.375V10.125ZM3.375 12.375H11.25V11.25H3.375V12.375ZM3.375 14.625H7.875V13.5H3.375V14.625Z" fill="#646464"/>
    //                                     </g>
    //                                     </g>
    //                                 </svg>    

    //                             </div>
    //                             <div class="sugestaoDescricaoIA">
    //                                 <div class="conteudoTextoDescricaoIA">
    //                                     <span class= "tituloCaixaSugestaoIA">Critério de aceitação</span><br><br>
    //                                         <p>
    //                                             Desenvolvimento: - inclusão de formulários contendo as perguntas do anexo 1160090 - salvar as respostas dos formulários Para Gestores (outros Dependências): 
    //                                                 a) Tela de inclusão de novas demandas (formulário em anexo) Obs: algumas informações devem estar pré-preenchidas com os dados da sessão (matrícula, Dependência, nome, e-mail), com possibilidade do usuário alterar Ao finalizar, modal para quem estiver preenchendo o formulário conferir antes de enviar e, ao confirmar, exibir oferecer a consulta da demanda. 
    //                                                 Tela de consulta de demandas abertas pelo Dependência: id da demanda, título da demanda, demandante, tipo de demanda, status Obs: Cada Dependência pode ter até 3 demandas com status "nova" e/ou "em análise" Obs 2:  Acompanhamento do status das demandas: "nova", "em análise", "análise concluída - abrir história", "análise concluída - Encerrada" Obs 3: Gestor poderá consultar somente as demandas do Dependência dele Obs 4: Gestor poderá editar e/ou excluir a demanda somente com status "nova"
    //                                         </p>
    //                                 </div>
    //                                 <!--Icone para copiar-->
    //                                 <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" class = "Clicar">
    //                                     <g id="Group">
    //                                     <g id="Group_2">
    //                                         <path id="Vector" d="M15.75 0H5.625C4.38244 0 3.375 1.00744 3.375 2.25H4.5C4.5 1.62928 5.00484 1.125 5.625 1.125H15.75C16.3707 1.125 16.875 1.62928 16.875 2.25V12.375C16.875 12.9957 16.3707 13.5 15.75 13.5V14.625C16.9926 14.625 18 13.6176 18 12.375V2.25C18 1.00744 16.9926 0 15.75 0ZM12.375 3.375H2.25C1.00744 3.375 0 4.38244 0 5.625V15.75C0 16.9926 1.00744 18 2.25 18H12.375C13.6176 18 14.625 16.9926 14.625 15.75V5.625C14.625 4.38244 13.6176 3.375 12.375 3.375ZM13.5 15.75C13.5 16.3707 12.9957 16.875 12.375 16.875H2.25C1.62984 16.875 1.125 16.3707 1.125 15.75V5.625C1.125 5.00428 1.62984 4.5 2.25 4.5H12.375C12.9957 4.5 13.5 5.00428 13.5 5.625V15.75ZM3.375 7.875H11.25V6.75H3.375V7.875ZM3.375 10.125H11.25V9H3.375V10.125ZM3.375 12.375H11.25V11.25H3.375V12.375ZM3.375 14.625H7.875V13.5H3.375V14.625Z" fill="#646464"/>
    //                                     </g>
    //                                     </g>
    //                                 </svg>    

    //                             </div>
    //                             <div class="sugestaoDescricaoIA">
    //                                 <div class="conteudoTextoDescricaoIA">
    //                                     <span class= "tituloCaixaSugestaoIA">Cenário de teste</span><br><br>
    //                                     Página com as informações e funcionalidades disponíveis em prod.
    //                                 </div>
    //                                 <!--Icone para copiar-->
    //                                 <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none" class = "Clicar">
    //                                     <g id="Group">
    //                                     <g id="Group_2">
    //                                         <path id="Vector" d="M15.75 0H5.625C4.38244 0 3.375 1.00744 3.375 2.25H4.5C4.5 1.62928 5.00484 1.125 5.625 1.125H15.75C16.3707 1.125 16.875 1.62928 16.875 2.25V12.375C16.875 12.9957 16.3707 13.5 15.75 13.5V14.625C16.9926 14.625 18 13.6176 18 12.375V2.25C18 1.00744 16.9926 0 15.75 0ZM12.375 3.375H2.25C1.00744 3.375 0 4.38244 0 5.625V15.75C0 16.9926 1.00744 18 2.25 18H12.375C13.6176 18 14.625 16.9926 14.625 15.75V5.625C14.625 4.38244 13.6176 3.375 12.375 3.375ZM13.5 15.75C13.5 16.3707 12.9957 16.875 12.375 16.875H2.25C1.62984 16.875 1.125 16.3707 1.125 15.75V5.625C1.125 5.00428 1.62984 4.5 2.25 4.5H12.375C12.9957 4.5 13.5 5.00428 13.5 5.625V15.75ZM3.375 7.875H11.25V6.75H3.375V7.875ZM3.375 10.125H11.25V9H3.375V10.125ZM3.375 12.375H11.25V11.25H3.375V12.375ZM3.375 14.625H7.875V13.5H3.375V14.625Z" fill="#646464"/>
    //                                     </g>
    //                                     </g>
    //                                 </svg>    
    //                             </div>
    //                         </div>
    //                         <div class= "secaoAbrirHistoria">
    //                             <div class="divConfiraChecklist">
    //                                 <div class="imgTextoConfiraChecklist">
    //                                     <svg xmlns="http://www.w3.org/2000/svg" width="57" height="58" viewBox="0 0 57 58" fill="none">
    //                                         <g clip-path="url(#clip0_6896_35888)">
    //                                             <path d="M57 29C57 45.0163 44.2396 58 28.5 58C12.7593 58 -3.93545e-06 45.0163 -2.53526e-06 29C-1.13507e-06 12.9837 12.7593 1.11545e-06 28.5 2.49155e-06C44.2396 3.86755e-06 57 12.9837 57 29Z" fill="#FC6E51"/>
    //                                             <path d="M33.1331 16.4269L39.3108 16.4269C39.8796 16.4269 40.3405 16.8965 40.3405 17.4748L40.3405 44.1921C40.3405 44.771 39.8796 45.24 39.3108 45.24L17.6875 45.24C17.1186 45.24 16.6577 44.771 16.6577 44.1922L16.6577 17.4748C16.6577 16.8965 17.1186 16.4269 17.6875 16.4269L23.8662 16.4269" fill="white"/>
    //                                             <path d="M39.3109 45.82L17.6877 45.82C16.8057 45.82 16.0879 45.0893 16.0879 44.1922L16.0879 17.4748C16.0879 16.5776 16.8058 15.8469 17.6877 15.8469L23.8664 15.8469L23.8664 17.0069L17.6877 17.0069C17.4342 17.0069 17.2279 17.2165 17.2279 17.4748L17.2279 44.1921C17.2279 44.4505 17.4342 44.66 17.6877 44.66L39.311 44.66C39.5643 44.66 39.7708 44.4504 39.7708 44.1922L39.7708 17.4748C39.7708 17.2165 39.5642 17.0069 39.3109 17.0069L33.1333 17.0069L33.1333 15.8469L39.3109 15.8469C40.1932 15.8469 40.9108 16.5776 40.9108 17.4748L40.9108 44.1921C40.9108 45.0893 40.1932 45.82 39.3109 45.82Z" fill="#454545"/>
    //                                             <path d="M32.1034 15.3791C32.1034 15.3791 30.5593 15.0381 30.5593 14.8557C30.5593 13.6974 29.6364 12.76 28.4997 12.76C27.3619 12.76 26.4401 13.6974 26.4401 14.8557C26.4401 15.0381 24.896 15.3791 24.896 15.3791C24.3271 15.3791 23.8662 15.8486 23.8662 16.4269L23.8662 18.5226C23.8662 19.1009 24.3271 19.5705 24.896 19.5705L32.1034 19.5705C32.6711 19.5705 33.1332 19.1009 33.1332 18.5226L33.1332 16.4269C33.1332 15.8487 32.6711 15.3791 32.1034 15.3791Z" fill="#FFB933"/>
    //                                             <path d="M32.1036 20.1505L24.8962 20.1505C24.0142 20.1505 23.2964 19.4198 23.2964 18.5226L23.2964 16.4269C23.2964 15.5524 23.9772 14.837 24.8277 14.8002C25.2321 14.7095 25.6501 14.5946 25.892 14.5114C26.0585 13.1983 27.1645 12.18 28.4999 12.18C29.8352 12.18 30.9413 13.1984 31.1078 14.5113C31.3496 14.5946 31.7676 14.7095 32.172 14.8002C33.0225 14.837 33.7033 15.5524 33.7033 16.4269L33.7033 18.5226C33.7033 19.4198 32.9855 20.1505 32.1036 20.1505ZM28.4999 13.34C27.6786 13.34 27.0103 14.0197 27.0103 14.8557C27.0103 15.3354 26.7092 15.5722 25.017 15.9455C24.9774 15.9545 24.9369 15.9591 24.8962 15.9591C24.6426 15.9591 24.4364 16.1687 24.4364 16.4269L24.4364 18.5226C24.4364 18.7809 24.6426 18.9905 24.8962 18.9905L32.1036 18.9905C32.3571 18.9905 32.5633 18.7809 32.5633 18.5226L32.5633 16.4269C32.5633 16.1686 32.3571 15.9591 32.1036 15.9591C32.0629 15.9591 32.0223 15.9545 31.9828 15.9455C30.2906 15.5722 29.9895 15.3354 29.9895 14.8557C29.9895 14.0197 29.3212 13.34 28.4999 13.34Z" fill="#454545"/>
    //                                             <path d="M21.0901 27.964C22.3493 27.964 23.3701 26.9253 23.3701 25.644C23.3701 24.3627 22.3493 23.324 21.0901 23.324C19.8309 23.324 18.8101 24.3627 18.8101 25.644C18.8101 26.9253 19.8309 27.964 21.0901 27.964Z" fill="#ACAF48"/>
    //                                             <path d="M21.0898 27.0441L19.5469 25.4741L20.3528 24.654L21.0899 25.4039L22.9668 23.494L23.7728 24.3141L21.0898 27.0441Z" fill="#454545"/>
    //                                             <path d="M21.0901 34.9241C22.3493 34.9241 23.3701 33.8854 23.3701 32.6041C23.3701 31.3228 22.3493 30.2841 21.0901 30.2841C19.8309 30.2841 18.8101 31.3228 18.8101 32.6041C18.8101 33.8854 19.8309 34.9241 21.0901 34.9241Z" fill="#ACAF48"/>
    //                                             <path d="M21.0898 34.0043L19.5469 32.4341L20.3528 31.6139L21.0899 32.3639L22.9668 30.4539L23.7728 31.2741L21.0899 34.0042L21.0898 34.0043Z" fill="#454545"/>
    //                                             <path d="M21.0901 41.884C22.3493 41.884 23.3701 40.8453 23.3701 39.564C23.3701 38.2827 22.3493 37.244 21.0901 37.244C19.8309 37.244 18.8101 38.2827 18.8101 39.564C18.8101 40.8453 19.8309 41.884 21.0901 41.884Z" fill="#ACAF48"/>
    //                                             <path d="M21.0898 40.9642L19.5469 39.3941L20.3528 38.5739L21.0899 39.3238L22.9668 37.4139L23.7728 38.2341L21.0899 40.9641L21.0898 40.9642ZM38.1898 25.0641L26.7898 25.0641L26.7898 23.9041L38.1898 23.9041L38.1898 25.0641ZM33.6298 27.3841L26.7898 27.3841L26.7898 26.2241L33.6298 26.2241L33.6298 27.3841ZM30.2098 32.0241L26.7898 32.0241L26.7898 30.8641L30.2098 30.8641L30.2098 32.0241ZM38.1898 32.0241L31.3498 32.0241L31.3498 30.8641L38.1898 30.8641L38.1898 32.0241ZM35.9098 34.3441L26.7898 34.3441L26.7898 33.1841L35.9098 33.1841L35.9098 34.3441Z" fill="#454545"/>
    //                                             <path d="M38.19 38.984L26.79 38.984L26.79 37.824L38.19 37.824L38.19 38.984Z" fill="#454545"/>
    //                                             <path d="M30.21 41.304L26.79 41.304L26.79 40.144L30.21 40.144L30.21 41.304Z" fill="#454545"/>
    //                                             <path d="M34.7701 41.304L31.3501 41.304L31.3501 40.144L34.7701 40.144L34.7701 41.304Z" fill="#454545"/>
    //                                         </g>
    //                                         <defs>
    //                                             <clipPath id="clip0_6896_35888">
    //                                             <rect width="57" height="58" fill="white"/>
    //                                             </clipPath>
    //                                         </defs>
    //                                     </svg>
    //                                     <div class="textoConfiraCheckist">
    //                                         Antes de abrir a história confira o checklist:<br> <span class="linkConfiraChecklistBold">Checklist jornada informacional</span>
    //                                     </div>    
    //                                 </div>
    //                                 <div class="divBtnPesquisa divBtnMaisFiltros" id="btnAbrirHistoria">
    //                                             <input type="button" class="btnPersonalizar maisFiltros" value="Abrir história" id=""> 
    //                                 </div>
    //                             <!--aqui vai o botão-->
    //                             </div>                        
    //                         </div>    
    //                         <div class="divDadosdaSolicitacao">
    //                             <div class="divTituloSecaoDadosDaSolicitacao">
    //                                 Dados da solicitação
    //                                 <!--Icon chevron up-->
    //                                 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    //                                     <path d="M7.41 15.41L12 10.83L16.59 15.41L18 14L12 8L6 14L7.41 15.41Z" fill="#2D37F5"/>
    //                                 </svg>
    //                             </div>  
    //                         </div>
    //                     </div> ';
    //                 }
    //             }
    //         }

    //      //}
        
    //     $status = '1';
    //     $retorno['status'] = $status;
    //     $retorno['mensagem'] = $paginaDeConsultaSolicitacao;

    //     return $retorno;
        
    // }

    public function acessaDetalheSolicitacaoVisaoCad ($idSolicitacao){
        global $mat;
        // $idSolicitacao = $idSolicitacao;

        $db = New Database("solicitacoes");
        $campoParecerFinal = '';

        /* Montagem da pagina seguindo*/

        $queryConsultaStatusSolicitacoes = "SELECT a.*, a.status as codStatus, b.status, ifnull(c.assuntoJornada, d.temaProduto) as tema, e.* from solicitacoes.solicitacoes a 
            LEFT JOIN solicitacoes.status b ON a.status = b.id
            LEFT JOIN solicitacoes.respostasJornadasInformacionais c ON a.idSolicitacao = c.idSolicitacao
            LEFT JOIN solicitacoes.respostasJornadasTransacionais d ON a.idSolicitacao = d.idSolicitacao
            LEFT JOIN solicitacoes.analiseInteligenciaArtificial e ON a.idSolicitacao = e.idSolicitacao
            WHERE a.idSolicitacao = '".$idSolicitacao."';
        ";

        $execQueryConsultaStatusSolicitacoes = $db->DbGetAll($queryConsultaStatusSolicitacoes);
            
        if(sizeof($execQueryConsultaStatusSolicitacoes) > 0){
            if($execQueryConsultaStatusSolicitacoes[0]['resumoDemanda'] != '' || $execQueryConsultaStatusSolicitacoes[0]['resumoDemanda'] != null){
                $resumoIa = '
                    <span class="itemFormulario">Resumo da demanda</span><br><br>
                    <div class=textoResumoDemanda>
                        '.$execQueryConsultaStatusSolicitacoes[0]['resumoDemanda'].'
                    </div>  </br>
                    <span class="itemFormulario">Avaliação da Solicitação</span> </br></br>
                    <span class = "negritoTextoAvaliacaoSolicitacao">'.$execQueryConsultaStatusSolicitacoes[0]['classificacaoFinal'].' - '.$execQueryConsultaStatusSolicitacoes[0]['resultadoFinal'].': </span> 
                    <span class="textoAvaliacaoSolicitacao">'.$execQueryConsultaStatusSolicitacoes[0]['justificativa'].'</span>
                ';
            } else {
                if($execQueryConsultaStatusSolicitacoes[0]['perguntaResposta'] != '' || $execQueryConsultaStatusSolicitacoes[0]['perguntaResposta'] != null){
                    $resumoIa = '
                        <div class="tituloAnaliseIa">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/iconeRobo.png">
                            <span class="tituloAnaliseIA">Análise da IA</span>
                        </div>
                        </br></br>
                        <span class="itemFormulario" attr-idSolicitacao="'.$idSolicitacao.'">A Inteligência Artificial não conseguiu analisar esta demanda. Clique no botão abaixo para solicitar uma nova análise.</span>
                        <div>
                            <input type="button" class="btnSolicitaNovaAnaliseIa" value="Solicitar Nova Análise IA" attr-idSolicitacao="'.$idSolicitacao.'">
                        </div>

                    ';
                } else {
                    $resumoIa = '
                        <div class="tituloAnaliseIa">
                            <img src="https://cad.bb.com.br/lib/apps/solicitacoes/img/iconeRobo.png">
                            <span class="tituloAnaliseIA">Análise da IA</span>
                        </div>
                        </br></br>
                        <span class="itemFormulario" attr-idSolicitacao="'.$idSolicitacao.'">A Inteligência Artificial não conseguiu analisar esta demanda e não foi possível montar o Input para esta análise.</span>
                        </br>
                        <span class="itemFormulario" attr-idSolicitacao="'.$idSolicitacao.'">Informe à equipe responsável o id da solicitação: '.$idSolicitacao.'</span>
                    ';
                }
            }

            if($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '1'){
                // Nova
                $cabecalhoStatus = '
                    <div class="detalheStatusConsultaSolicitacao">
                        <svg xmlns="http://www.w3.org/2000/svg" width="104" height="25" viewBox="0 0 104 25" fill="none">
                            <rect x="0.5" y="1" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                            <rect x="0.5" y="1" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                            <circle cx="31.9997" cy="12.5" r="2.66667" fill="#4668FF"/>
                            <path d="M44.66 17.5H43.05V7.756H44.562L49.476 14.7V7.756H51.086V17.5H49.56L44.66 10.542V17.5ZM56.5269 17.612C55.8362 17.612 55.2015 17.444 54.6229 17.108C54.0535 16.772 53.6009 16.3147 53.2649 15.736C52.9382 15.148 52.7749 14.504 52.7749 13.804C52.7749 13.104 52.9382 12.4647 53.2649 11.886C53.6009 11.298 54.0535 10.836 54.6229 10.5C55.2015 10.164 55.8362 9.996 56.5269 9.996C57.2175 9.996 57.8475 10.164 58.4169 10.5C58.9955 10.836 59.4482 11.298 59.7749 11.886C60.1109 12.4647 60.2789 13.104 60.2789 13.804C60.2789 14.504 60.1109 15.148 59.7749 15.736C59.4482 16.3147 58.9955 16.772 58.4169 17.108C57.8475 17.444 57.2175 17.612 56.5269 17.612ZM56.5269 16.142C56.9282 16.142 57.2875 16.044 57.6049 15.848C57.9315 15.6427 58.1835 15.3627 58.3609 15.008C58.5475 14.644 58.6409 14.2427 58.6409 13.804C58.6409 13.3653 58.5475 12.9687 58.3609 12.614C58.1835 12.2593 57.9315 11.984 57.6049 11.788C57.2875 11.5827 56.9282 11.48 56.5269 11.48C55.9109 11.48 55.4022 11.6993 55.0009 12.138C54.6089 12.5767 54.4129 13.132 54.4129 13.804C54.4129 14.476 54.6089 15.036 55.0009 15.484C55.4022 15.9227 55.9109 16.142 56.5269 16.142ZM65.431 17.5H63.555L60.615 10.122H62.435L64.535 15.834L66.607 10.122H68.371L65.431 17.5ZM71.9893 9.996C72.9506 9.996 73.6973 10.262 74.2293 10.794C74.7706 11.3167 75.0413 12.0633 75.0413 13.034V17.5H73.5853V16.366C73.3613 16.73 73.0393 17.0287 72.6193 17.262C72.2086 17.4953 71.7233 17.612 71.1633 17.612C70.51 17.612 69.9826 17.4347 69.5813 17.08C69.18 16.7253 68.9793 16.2493 68.9793 15.652C68.9793 15.092 69.1333 14.63 69.4413 14.266C69.7493 13.8927 70.23 13.5987 70.8833 13.384C71.546 13.1693 72.4233 13.0107 73.5153 12.908V12.838C73.5153 12.39 73.3846 12.0447 73.1233 11.802C72.8713 11.55 72.4746 11.424 71.9333 11.424C71.1586 11.424 70.384 11.6433 69.6093 12.082L69.2593 10.738C70.146 10.2433 71.056 9.996 71.9893 9.996ZM71.4713 16.352C71.826 16.352 72.162 16.2633 72.4793 16.086C72.7966 15.9087 73.0486 15.666 73.2353 15.358C73.422 15.05 73.5153 14.7093 73.5153 14.336V14.056C72.4886 14.14 71.728 14.294 71.2333 14.518C70.748 14.7327 70.5053 15.0453 70.5053 15.456C70.5053 15.736 70.5893 15.9553 70.7573 16.114C70.9253 16.2727 71.1633 16.352 71.4713 16.352Z" fill="#4668FF"/>
                        </svg>
                        <span class="mensagemStatusNova"> Nova demanda, mude o Status para prosseguir com a avaliação</span>
                    </div>'
                ;

                $selectStatus = '
                    <select class="selectStatusVisaoCad" id="selectStatusSolicitacao" attr-idsolicitacao="'.$idSolicitacao.'">
                        <option value="0">Selecione</option>
                        <!-- <option value="1">Nova</option> -->
                        <option value="2">Em análise</option>
                        <option value="3">Aprovada</option>
                        <option value="4">Encerrada</option>
                    </select>
                ';

                $botaoSalvar = '<input type="button" class="btnAlteraStatusVisaoCad" value="Salvar" attr-idSolicitacao="'.$idSolicitacao.'">';

                $campoParecerFinal = '
                    <div class="divParecerFinalVisaoCad" style="display:none;">
                        <span class="itemFormulario">Parecer final</span>
                        <textarea class="txtAreaMedio" id="parecerFinalVisaoCad" name="parecerFinalVisaoCad" rows="7" cols="150" maxlength="500" placeholder="Mensagem"></textarea>
                        <div id="contadorParecerFinal">500 caracteres restantes</div></br>  
                    </div>
                ';
            }

            if($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '2'){
                // Em Análise
                $cabecalhoStatus = '
                    <div class="detalheStatusConsultaSolicitacao">
                        <svg xmlns="http://www.w3.org/2000/svg" width="104" height="25" viewBox="0 0 104 25" fill="none">
                            <rect x="0.5" y="1" width="103" height="23" rx="11.5" fill="#F0F2F4"/>
                            <rect x="0.5" y="1" width="103" height="23" rx="11.5" stroke="#D4D8DD"/>
                            <circle cx="11.9997" cy="12.5002" r="2.66667" fill="#FFB31A"/>
                            <path d="M29.798 17.5H23.05V7.756H29.658V9.296H24.646V11.774H28.958V13.3H24.646V15.96H29.798V17.5ZM31.3352 17.5V10.122H32.8192V11.298C33.0245 10.906 33.3138 10.5933 33.6872 10.36C34.0605 10.1173 34.4805 9.996 34.9472 9.996C35.4885 9.996 35.9458 10.1127 36.3192 10.346C36.7018 10.57 36.9912 10.8967 37.1872 11.326C37.7472 10.4393 38.5498 9.996 39.5952 9.996C40.4912 9.996 41.1632 10.3087 41.6112 10.934C42.0592 11.5593 42.2832 12.418 42.2832 13.51V17.5H40.6872V13.524C40.6872 12.8893 40.5892 12.3947 40.3932 12.04C40.1972 11.676 39.8285 11.494 39.2872 11.494C38.7925 11.494 38.3865 11.6573 38.0692 11.984C37.7612 12.3013 37.6072 12.7493 37.6072 13.328V17.5H36.0112V13.538C36.0112 12.9127 35.9132 12.418 35.7172 12.054C35.5212 11.6807 35.1572 11.494 34.6252 11.494C34.1305 11.494 33.7245 11.6853 33.4072 12.068C33.0992 12.4413 32.9452 12.9313 32.9452 13.538V17.5H31.3352ZM48.4802 17.5H46.7722L50.4682 7.756H52.3582L56.0542 17.5H54.2902L53.4222 15.12H49.3342L48.4802 17.5ZM51.3642 9.394L49.8102 13.762H52.9462L51.3642 9.394ZM57.4123 17.5V10.122H58.8963V11.298C59.1017 10.906 59.4003 10.5933 59.7923 10.36C60.1843 10.1173 60.651 9.996 61.1923 9.996C62.1257 9.996 62.8397 10.3273 63.3343 10.99C63.8383 11.6527 64.0903 12.5253 64.0903 13.608V17.5H62.4803V13.664C62.4803 12.9547 62.3403 12.418 62.0603 12.054C61.7897 11.6807 61.3837 11.494 60.8423 11.494C60.2917 11.494 59.8483 11.6807 59.5123 12.054C59.1857 12.4273 59.0223 12.922 59.0223 13.538V17.5H57.4123ZM68.5902 9.996C69.5516 9.996 70.2982 10.262 70.8302 10.794C71.3716 11.3167 71.6422 12.0633 71.6422 13.034V17.5H70.1862V16.366C69.9622 16.73 69.6402 17.0287 69.2202 17.262C68.8096 17.4953 68.3242 17.612 67.7642 17.612C67.1109 17.612 66.5836 17.4347 66.1822 17.08C65.7809 16.7253 65.5802 16.2493 65.5802 15.652C65.5802 15.092 65.7342 14.63 66.0422 14.266C66.3502 13.8927 66.8309 13.5987 67.4842 13.384C68.1469 13.1693 69.0242 13.0107 70.1162 12.908V12.838C70.1162 12.39 69.9856 12.0447 69.7242 11.802C69.4722 11.55 69.0756 11.424 68.5342 11.424C67.7596 11.424 66.9849 11.6433 66.2102 12.082L65.8602 10.738C66.7469 10.2433 67.6569 9.996 68.5902 9.996ZM68.0722 16.352C68.4269 16.352 68.7629 16.2633 69.0802 16.086C69.3976 15.9087 69.6496 15.666 69.8362 15.358C70.0229 15.05 70.1162 14.7093 70.1162 14.336V14.056C69.0896 14.14 68.3289 14.294 67.8342 14.518C67.3489 14.7327 67.1062 15.0453 67.1062 15.456C67.1062 15.736 67.1902 15.9553 67.3582 16.114C67.5262 16.2727 67.7642 16.352 68.0722 16.352ZM69.2342 9.058H67.7362L69.5842 6.762H71.5722L69.2342 9.058ZM75.8864 17.612C75.1304 17.612 74.5471 17.374 74.1364 16.898C73.7351 16.422 73.5344 15.7267 73.5344 14.812V7H75.1304V14.84C75.1304 15.26 75.2098 15.582 75.3684 15.806C75.5271 16.0207 75.7511 16.128 76.0404 16.128C76.2084 16.128 76.3531 16.114 76.4744 16.086C76.5958 16.0487 76.7264 15.9927 76.8664 15.918L77.2724 17.22C76.8711 17.4813 76.4091 17.612 75.8864 17.612ZM80.0956 17.5H78.4856V10.122H80.0956V17.5ZM79.2976 9.058C79.0083 9.058 78.7656 8.96467 78.5696 8.778C78.3736 8.582 78.2756 8.33933 78.2756 8.05C78.2756 7.77 78.3736 7.532 78.5696 7.336C78.7656 7.13067 79.0083 7.028 79.2976 7.028C79.5963 7.028 79.839 7.126 80.0256 7.322C80.2216 7.50867 80.3196 7.742 80.3196 8.022C80.3196 8.32067 80.2216 8.568 80.0256 8.764C79.839 8.96 79.5963 9.058 79.2976 9.058ZM84.3083 17.612C83.8416 17.612 83.3563 17.542 82.8523 17.402C82.3483 17.2527 81.947 17.0847 81.6483 16.898L82.0543 15.596C82.353 15.764 82.7123 15.9087 83.1323 16.03C83.5523 16.1513 83.9723 16.212 84.3923 16.212C84.747 16.212 85.0223 16.156 85.2183 16.044C85.4236 15.9227 85.5263 15.7407 85.5263 15.498C85.5263 15.246 85.4096 15.05 85.1763 14.91C84.9523 14.7607 84.5556 14.588 83.9863 14.392C83.2956 14.1493 82.7823 13.86 82.4463 13.524C82.1196 13.188 81.9563 12.7353 81.9563 12.166C81.9563 11.718 82.073 11.3307 82.3063 11.004C82.549 10.6773 82.871 10.43 83.2723 10.262C83.683 10.0847 84.131 9.996 84.6163 9.996C85.0176 9.996 85.419 10.0567 85.8203 10.178C86.2216 10.2993 86.5716 10.458 86.8703 10.654L86.4643 11.9C85.8576 11.564 85.251 11.396 84.6443 11.396C84.3083 11.396 84.033 11.4567 83.8183 11.578C83.6036 11.69 83.4963 11.872 83.4963 12.124C83.4963 12.3387 83.5943 12.5113 83.7903 12.642C83.9956 12.7727 84.313 12.9173 84.7423 13.076C85.5823 13.3933 86.1843 13.72 86.5483 14.056C86.9123 14.392 87.0943 14.8587 87.0943 15.456C87.0943 16.1373 86.8376 16.6693 86.3243 17.052C85.8203 17.4253 85.1483 17.612 84.3083 17.612ZM91.9794 17.612C91.2514 17.612 90.6028 17.4487 90.0334 17.122C89.4641 16.786 89.0208 16.3287 88.7034 15.75C88.3861 15.1713 88.2274 14.518 88.2274 13.79C88.2274 13.09 88.3768 12.4507 88.6754 11.872C88.9741 11.2933 89.3848 10.836 89.9074 10.5C90.4394 10.164 91.0368 9.996 91.6994 9.996C92.7261 9.996 93.5288 10.3273 94.1074 10.99C94.6954 11.6433 94.9894 12.558 94.9894 13.734V14.322H89.8374C89.9401 14.882 90.1921 15.3347 90.5934 15.68C90.9948 16.016 91.4894 16.184 92.0774 16.184C92.8521 16.184 93.5381 16.016 94.1354 15.68L94.4574 16.982C93.7761 17.402 92.9501 17.612 91.9794 17.612ZM93.3934 13.09C93.3654 12.5393 93.2068 12.11 92.9174 11.802C92.6281 11.4847 92.2221 11.326 91.6994 11.326C91.1768 11.326 90.7521 11.4847 90.4254 11.802C90.0988 12.1193 89.8981 12.5487 89.8234 13.09H93.3934Z" fill="#AD5F00"/>
                        </svg>
                        <span class="mensagemStatusAnalise"> Essa demanda está sendo avaliada, mude o Status para prosseguir</span>
                    </div>
                ';

                $selectStatus = '
                    <select class="selectStatusVisaoCad" id="selectStatusSolicitacao" attr-idsolicitacao="'.$idSolicitacao.'">
                        <option value="0">Selecione</option>
                        <!-- <option value="1">Nova</option> -->
                        <!-- <option value="2">Em análise</option> -->
                        <option value="3">Aprovada</option>
                        <option value="4">Encerrada</option>
                    </select>
                ';

                $botaoSalvar = '<input type="button" class="btnAlteraStatusVisaoCad" value="Salvar" attr-idSolicitacao="'.$idSolicitacao.'">';

                $campoParecerFinal = '
                    <div class="divParecerFinalVisaoCad" style="display:none;">
                        <span class="itemFormulario">Parecer final</span>
                        <textarea class="txtAreaMedio" id="parecerFinalVisaoCad" name="parecerFinalVisaoCad" rows="7" cols="150" maxlength="500" placeholder="Mensagem"></textarea>
                        <div id="contadorParecerFinal">500 caracteres restantes</div></br>  
                    </div>
                ';
            }

            if($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '3'){
                // Aprovada
                $cabecalhoStatus = '
                    <div class="detalheStatusConsultaSolicitacao">
                        <svg xmlns="http://www.w3.org/2000/svg" width="95" height="25" viewBox="0 0 95 25" fill="none">
                            <rect x="0.5" y="1" width="94" height="23" rx="11.5" fill="#F0F2F4"/>
                            <rect x="0.5" y="1" width="94" height="23" rx="11.5" stroke="#D4D8DD"/>
                            <circle cx="12.0002" cy="12.5" r="2.66667" fill="#0C8A00"/>
                            <path d="M24.03 17.5H22.322L26.018 7.756H27.908L31.604 17.5H29.84L28.972 15.12H24.884L24.03 17.5ZM26.914 9.394L25.36 13.762H28.496L26.914 9.394ZM32.9621 20.202V10.122H34.4461V11.326C34.6608 10.9527 34.9828 10.64 35.4121 10.388C35.8508 10.1267 36.3501 9.996 36.9101 9.996C37.5541 9.996 38.1328 10.1547 38.6461 10.472C39.1594 10.78 39.5608 11.2187 39.8501 11.788C40.1488 12.3573 40.2981 13.0107 40.2981 13.748C40.2981 14.4947 40.1488 15.1573 39.8501 15.736C39.5514 16.3147 39.1408 16.7673 38.6181 17.094C38.0954 17.4207 37.5121 17.584 36.8681 17.584C36.3734 17.584 35.9254 17.4907 35.5241 17.304C35.1321 17.108 34.8148 16.856 34.5721 16.548V20.202H32.9621ZM36.6721 16.128C37.0268 16.128 37.3534 16.0393 37.6521 15.862C37.9601 15.6847 38.2028 15.4187 38.3801 15.064C38.5668 14.7093 38.6601 14.2847 38.6601 13.79C38.6601 13.2953 38.5668 12.8753 38.3801 12.53C38.2028 12.1753 37.9648 11.9093 37.6661 11.732C37.3674 11.5547 37.0408 11.466 36.6861 11.466C36.0608 11.466 35.5521 11.662 35.1601 12.054C34.7681 12.446 34.5721 12.9873 34.5721 13.678V13.902C34.5721 14.602 34.7681 15.148 35.1601 15.54C35.5521 15.932 36.0561 16.128 36.6721 16.128ZM41.9188 17.5V10.122H43.4028V11.298C43.6082 10.9247 43.9115 10.6213 44.3128 10.388C44.7142 10.1547 45.1902 10.038 45.7408 10.038C45.8622 10.038 45.9975 10.0473 46.1468 10.066C46.3055 10.0753 46.4222 10.094 46.4968 10.122L46.2448 11.648C45.9835 11.5827 45.7222 11.55 45.4608 11.55C44.9288 11.55 44.4715 11.7273 44.0888 12.082C43.7155 12.4367 43.5288 12.9313 43.5288 13.566V17.5H41.9188ZM50.7626 17.612C50.0719 17.612 49.4372 17.444 48.8586 17.108C48.2892 16.772 47.8366 16.3147 47.5006 15.736C47.1739 15.148 47.0106 14.504 47.0106 13.804C47.0106 13.104 47.1739 12.4647 47.5006 11.886C47.8366 11.298 48.2892 10.836 48.8586 10.5C49.4372 10.164 50.0719 9.996 50.7626 9.996C51.4532 9.996 52.0832 10.164 52.6526 10.5C53.2312 10.836 53.6839 11.298 54.0106 11.886C54.3466 12.4647 54.5146 13.104 54.5146 13.804C54.5146 14.504 54.3466 15.148 54.0106 15.736C53.6839 16.3147 53.2312 16.772 52.6526 17.108C52.0832 17.444 51.4532 17.612 50.7626 17.612ZM50.7626 16.142C51.1639 16.142 51.5232 16.044 51.8406 15.848C52.1672 15.6427 52.4192 15.3627 52.5966 15.008C52.7832 14.644 52.8766 14.2427 52.8766 13.804C52.8766 13.3653 52.7832 12.9687 52.5966 12.614C52.4192 12.2593 52.1672 11.984 51.8406 11.788C51.5232 11.5827 51.1639 11.48 50.7626 11.48C50.1466 11.48 49.6379 11.6993 49.2366 12.138C48.8446 12.5767 48.6486 13.132 48.6486 13.804C48.6486 14.476 48.8446 15.036 49.2366 15.484C49.6379 15.9227 50.1466 16.142 50.7626 16.142ZM59.6667 17.5H57.7907L54.8507 10.122H56.6707L58.7707 15.834L60.8427 10.122H62.6067L59.6667 17.5ZM66.225 9.996C67.1863 9.996 67.933 10.262 68.465 10.794C69.0063 11.3167 69.277 12.0633 69.277 13.034V17.5H67.821V16.366C67.597 16.73 67.275 17.0287 66.855 17.262C66.4443 17.4953 65.959 17.612 65.399 17.612C64.7457 17.612 64.2183 17.4347 63.817 17.08C63.4157 16.7253 63.215 16.2493 63.215 15.652C63.215 15.092 63.369 14.63 63.677 14.266C63.985 13.8927 64.4657 13.5987 65.119 13.384C65.7817 13.1693 66.659 13.0107 67.751 12.908V12.838C67.751 12.39 67.6203 12.0447 67.359 11.802C67.107 11.55 66.7103 11.424 66.169 11.424C65.3943 11.424 64.6197 11.6433 63.845 12.082L63.495 10.738C64.3817 10.2433 65.2917 9.996 66.225 9.996ZM65.707 16.352C66.0617 16.352 66.3977 16.2633 66.715 16.086C67.0323 15.9087 67.2843 15.666 67.471 15.358C67.6577 15.05 67.751 14.7093 67.751 14.336V14.056C66.7243 14.14 65.9637 14.294 65.469 14.518C64.9837 14.7327 64.741 15.0453 64.741 15.456C64.741 15.736 64.825 15.9553 64.993 16.114C65.161 16.2727 65.399 16.352 65.707 16.352ZM74.1652 17.612C73.5212 17.612 72.9379 17.458 72.4152 17.15C71.9019 16.8327 71.5005 16.3893 71.2112 15.82C70.9219 15.2507 70.7772 14.5973 70.7772 13.86C70.7772 13.1227 70.9219 12.46 71.2112 11.872C71.5099 11.284 71.9205 10.8267 72.4432 10.5C72.9659 10.1733 73.5492 10.01 74.1932 10.01C74.6879 10.01 75.1359 10.108 75.5372 10.304C75.9385 10.5 76.2652 10.7567 76.5172 11.074V7H78.1132V17.5H76.6292V16.268C76.4052 16.66 76.0785 16.982 75.6492 17.234C75.2199 17.486 74.7252 17.612 74.1652 17.612ZM74.4032 16.156C75.0192 16.156 75.5232 15.96 75.9152 15.568C76.3165 15.176 76.5172 14.6347 76.5172 13.944V13.706C76.5172 13.0153 76.3165 12.4693 75.9152 12.068C75.5139 11.6667 75.0099 11.466 74.4032 11.466C74.0485 11.466 73.7172 11.5593 73.4092 11.746C73.1105 11.9233 72.8679 12.1893 72.6812 12.544C72.5039 12.8987 72.4152 13.328 72.4152 13.832C72.4152 14.5693 72.6065 15.1433 72.9892 15.554C73.3719 15.9553 73.8432 16.156 74.4032 16.156ZM82.7439 9.996C83.7053 9.996 84.4519 10.262 84.9839 10.794C85.5253 11.3167 85.7959 12.0633 85.7959 13.034V17.5H84.3399V16.366C84.1159 16.73 83.7939 17.0287 83.3739 17.262C82.9633 17.4953 82.4779 17.612 81.9179 17.612C81.2646 17.612 80.7373 17.4347 80.3359 17.08C79.9346 16.7253 79.7339 16.2493 79.7339 15.652C79.7339 15.092 79.8879 14.63 80.1959 14.266C80.5039 13.8927 80.9846 13.5987 81.6379 13.384C82.3006 13.1693 83.1779 13.0107 84.2699 12.908V12.838C84.2699 12.39 84.1393 12.0447 83.8779 11.802C83.6259 11.55 83.2293 11.424 82.6879 11.424C81.9133 11.424 81.1386 11.6433 80.3639 12.082L80.0139 10.738C80.9006 10.2433 81.8106 9.996 82.7439 9.996ZM82.2259 16.352C82.5806 16.352 82.9166 16.2633 83.2339 16.086C83.5513 15.9087 83.8033 15.666 83.9899 15.358C84.1766 15.05 84.2699 14.7093 84.2699 14.336V14.056C83.2433 14.14 82.4826 14.294 81.9879 14.518C81.5026 14.7327 81.2599 15.0453 81.2599 15.456C81.2599 15.736 81.3439 15.9553 81.5119 16.114C81.6799 16.2727 81.9179 16.352 82.2259 16.352Z" fill="#0C8A00"/>
                        </svg>
                        <span class="mensagemStatusAprovada"> Sua solicitação foi aprovada</span>
                    </div>
                ';

                $selectStatus = '
                    <select class="selectStatusVisaoCad" id="selectStatusSolicitacao" attr-idsolicitacao="'.$idSolicitacao.'" disabled>
                        <option value="3">Aprovada</option>
                    </select>
                ';

                $botaoSalvar = '';
            }

            if($execQueryConsultaStatusSolicitacoes[0]['codStatus'] == '4'){
                // Encerrada
                $cabecalhoStatus = '
                    <div class="detalheStatusConsultaSolicitacao">
                        <svg xmlns="http://www.w3.org/2000/svg" width="98" height="25" viewBox="0 0 98 25" fill="none">
                            <rect x="0.5" y="1" width="97" height="23" rx="11.5" fill="#F0F2F4"/>
                            <rect x="0.5" y="1" width="97" height="23" rx="11.5" stroke="#D4D8DD"/>
                            <circle cx="12.0002" cy="12.5" r="2.66667" fill="#E3111F"/>
                            <path d="M29.798 17.5H23.05V7.756H29.658V9.296H24.646V11.774H28.958V13.3H24.646V15.96H29.798V17.5ZM31.3352 17.5V10.122H32.8192V11.298C33.0245 10.906 33.3232 10.5933 33.7152 10.36C34.1072 10.1173 34.5738 9.996 35.1152 9.996C36.0485 9.996 36.7625 10.3273 37.2572 10.99C37.7612 11.6527 38.0132 12.5253 38.0132 13.608V17.5H36.4032V13.664C36.4032 12.9547 36.2632 12.418 35.9832 12.054C35.7125 11.6807 35.3065 11.494 34.7652 11.494C34.2145 11.494 33.7712 11.6807 33.4352 12.054C33.1085 12.4273 32.9452 12.922 32.9452 13.538V17.5H31.3352ZM43.1431 17.612C42.4617 17.612 41.8457 17.4487 41.2951 17.122C40.7444 16.7953 40.3057 16.3427 39.9791 15.764C39.6617 15.1853 39.5031 14.5273 39.5031 13.79C39.5031 13.0807 39.6711 12.4367 40.0071 11.858C40.3431 11.2793 40.7911 10.8267 41.3511 10.5C41.9204 10.164 42.5411 9.996 43.2131 9.996C43.6144 9.996 43.9737 10.0427 44.2911 10.136C44.6177 10.22 44.9397 10.36 45.2571 10.556L44.8651 11.9C44.3891 11.62 43.8617 11.48 43.2831 11.48C42.6577 11.48 42.1444 11.69 41.7431 12.11C41.3417 12.53 41.1411 13.09 41.1411 13.79C41.1411 14.4993 41.3417 15.0687 41.7431 15.498C42.1444 15.9273 42.6484 16.142 43.2551 16.142C43.5817 16.142 43.8711 16.1 44.1231 16.016C44.3844 15.932 44.6504 15.8153 44.9211 15.666L45.3271 17.01C45.0004 17.2153 44.6644 17.3693 44.3191 17.472C43.9831 17.5653 43.5911 17.612 43.1431 17.612ZM49.9286 17.612C49.2006 17.612 48.5519 17.4487 47.9826 17.122C47.4132 16.786 46.9699 16.3287 46.6526 15.75C46.3352 15.1713 46.1766 14.518 46.1766 13.79C46.1766 13.09 46.3259 12.4507 46.6246 11.872C46.9232 11.2933 47.3339 10.836 47.8566 10.5C48.3886 10.164 48.9859 9.996 49.6486 9.996C50.6752 9.996 51.4779 10.3273 52.0566 10.99C52.6446 11.6433 52.9386 12.558 52.9386 13.734V14.322H47.7866C47.8892 14.882 48.1412 15.3347 48.5426 15.68C48.9439 16.016 49.4386 16.184 50.0266 16.184C50.8012 16.184 51.4872 16.016 52.0846 15.68L52.4066 16.982C51.7252 17.402 50.8992 17.612 49.9286 17.612ZM51.3426 13.09C51.3146 12.5393 51.1559 12.11 50.8666 11.802C50.5772 11.4847 50.1712 11.326 49.6486 11.326C49.1259 11.326 48.7012 11.4847 48.3746 11.802C48.0479 12.1193 47.8472 12.5487 47.7726 13.09H51.3426ZM54.5002 17.5V10.122H55.9842V11.298C56.1896 10.9247 56.4929 10.6213 56.8942 10.388C57.2956 10.1547 57.7716 10.038 58.3222 10.038C58.4436 10.038 58.5789 10.0473 58.7282 10.066C58.8869 10.0753 59.0036 10.094 59.0782 10.122L58.8262 11.648C58.5649 11.5827 58.3036 11.55 58.0422 11.55C57.5102 11.55 57.0529 11.7273 56.6702 12.082C56.2969 12.4367 56.1102 12.9313 56.1102 13.566V17.5H54.5002ZM60.5175 17.5V10.122H62.0015V11.298C62.2068 10.9247 62.5102 10.6213 62.9115 10.388C63.3128 10.1547 63.7888 10.038 64.3395 10.038C64.4608 10.038 64.5962 10.0473 64.7455 10.066C64.9042 10.0753 65.0208 10.094 65.0955 10.122L64.8435 11.648C64.5822 11.5827 64.3208 11.55 64.0595 11.55C63.5275 11.55 63.0702 11.7273 62.6875 12.082C62.3142 12.4367 62.1275 12.9313 62.1275 13.566V17.5H60.5175ZM68.8106 9.996C69.772 9.996 70.5186 10.262 71.0506 10.794C71.592 11.3167 71.8626 12.0633 71.8626 13.034V17.5H70.4066V16.366C70.1826 16.73 69.8606 17.0287 69.4406 17.262C69.03 17.4953 68.5446 17.612 67.9846 17.612C67.3313 17.612 66.804 17.4347 66.4026 17.08C66.0013 16.7253 65.8006 16.2493 65.8006 15.652C65.8006 15.092 65.9546 14.63 66.2626 14.266C66.5706 13.8927 67.0513 13.5987 67.7046 13.384C68.3673 13.1693 69.2446 13.0107 70.3366 12.908V12.838C70.3366 12.39 70.206 12.0447 69.9446 11.802C69.6926 11.55 69.296 11.424 68.7546 11.424C67.98 11.424 67.2053 11.6433 66.4306 12.082L66.0806 10.738C66.9673 10.2433 67.8773 9.996 68.8106 9.996ZM68.2926 16.352C68.6473 16.352 68.9833 16.2633 69.3006 16.086C69.618 15.9087 69.87 15.666 70.0566 15.358C70.2433 15.05 70.3366 14.7093 70.3366 14.336V14.056C69.31 14.14 68.5493 14.294 68.0546 14.518C67.5693 14.7327 67.3266 15.0453 67.3266 15.456C67.3266 15.736 67.4106 15.9553 67.5786 16.114C67.7466 16.2727 67.9846 16.352 68.2926 16.352ZM76.7508 17.612C76.1068 17.612 75.5235 17.458 75.0008 17.15C74.4875 16.8327 74.0862 16.3893 73.7968 15.82C73.5075 15.2507 73.3628 14.5973 73.3628 13.86C73.3628 13.1227 73.5075 12.46 73.7968 11.872C74.0955 11.284 74.5062 10.8267 75.0288 10.5C75.5515 10.1733 76.1348 10.01 76.7788 10.01C77.2735 10.01 77.7215 10.108 78.1228 10.304C78.5242 10.5 78.8508 10.7567 79.1028 11.074V7H80.6988V17.5H79.2148V16.268C78.9908 16.66 78.6642 16.982 78.2348 17.234C77.8055 17.486 77.3108 17.612 76.7508 17.612ZM76.9888 16.156C77.6048 16.156 78.1088 15.96 78.5008 15.568C78.9022 15.176 79.1028 14.6347 79.1028 13.944V13.706C79.1028 13.0153 78.9022 12.4693 78.5008 12.068C78.0995 11.6667 77.5955 11.466 76.9888 11.466C76.6342 11.466 76.3028 11.5593 75.9948 11.746C75.6962 11.9233 75.4535 12.1893 75.2668 12.544C75.0895 12.8987 75.0008 13.328 75.0008 13.832C75.0008 14.5693 75.1922 15.1433 75.5748 15.554C75.9575 15.9553 76.4288 16.156 76.9888 16.156ZM85.3295 9.996C86.2909 9.996 87.0375 10.262 87.5695 10.794C88.1109 11.3167 88.3815 12.0633 88.3815 13.034V17.5H86.9255V16.366C86.7015 16.73 86.3795 17.0287 85.9595 17.262C85.5489 17.4953 85.0635 17.612 84.5035 17.612C83.8502 17.612 83.3229 17.4347 82.9215 17.08C82.5202 16.7253 82.3195 16.2493 82.3195 15.652C82.3195 15.092 82.4735 14.63 82.7815 14.266C83.0895 13.8927 83.5702 13.5987 84.2235 13.384C84.8862 13.1693 85.7635 13.0107 86.8555 12.908V12.838C86.8555 12.39 86.7249 12.0447 86.4635 11.802C86.2115 11.55 85.8149 11.424 85.2735 11.424C84.4989 11.424 83.7242 11.6433 82.9495 12.082L82.5995 10.738C83.4862 10.2433 84.3962 9.996 85.3295 9.996ZM84.8115 16.352C85.1662 16.352 85.5022 16.2633 85.8195 16.086C86.1369 15.9087 86.3889 15.666 86.5755 15.358C86.7622 15.05 86.8555 14.7093 86.8555 14.336V14.056C85.8289 14.14 85.0682 14.294 84.5735 14.518C84.0882 14.7327 83.8455 15.0453 83.8455 15.456C83.8455 15.736 83.9295 15.9553 84.0975 16.114C84.2655 16.2727 84.5035 16.352 84.8115 16.352Z" fill="#E3111F"/>
                        </svg>
                        <span class="mensagemStatusEncerrada"> Essa demanda encontra-se Encerrada pelo CAD</span>
                    </div>
                ';

                $selectStatus = '
                    <select class="selectStatusVisaoCad" id="selectStatusSolicitacao" attr-idsolicitacao="'.$idSolicitacao.'" disabled>
                        <option value="4">Encerrada</option>
                    </select>
                ';

                $botaoSalvar = '';
            }

            
            
            $paginaDeConsultaSolicitacao = '
                <div class="divConsultaDetalheSolicitacao">
                    <div class= "cabecalhoAbaConsultaSolicitacao">
                        <div class="voltaIDCabecalho">
                            <svg class = "btnVoltaParaTabelaSolicitacoesCad Clicar" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M8.707 7.29309L4 12.0001L8.707 16.7071L10.121 15.2931L7.828 13.0001H19.414V11.0001L7.828 11.0001L10.121 8.70709L8.707 7.29309Z" fill="#2D37F5"/>
                            </svg>
                            <span class = "textoVoltarDetalheSolicitacao  btnVoltaParaTabelaSolicitacoesCad Clicar">Voltar</span> <span class ="idCabecalhoDetalheSolicitacao"> / #ID'.$idSolicitacao.' </span >
                        </div>
                        <span class="temaProdutoDetalheSolicitacao">'.$execQueryConsultaStatusSolicitacoes[0]['tipoSolicitacao'].' - '.$execQueryConsultaStatusSolicitacoes[0]['tema'].'</span>
                        '.$cabecalhoStatus.'
                    </div>
                    <div class= "linhaDivisoria" style = "margin-top:5%;"></div>
                    <div class="selecaoStatus">
                        <div style= "width: 100%;">
                            <span class= "itemFormulario">Status</span>
                            '.$selectStatus.'
                        </div>
                        <div>
                            '.$botaoSalvar.'
                        </div>
                    </div>
                    <div class="areaResumoDemanda">
                        '.$resumoIa.'
                    </div>
                    '.$campoParecerFinal.'
                    <div class="novoComentarioVisaoCad">
                        <span class="itemFormulario">Comentários da demanda(somente para funcionários do CAD)</span>
                        <textarea class="txtAreaMedio" id="novoComentarioVisaoCad" name="novoComentarioVisaoCad" rows="7" cols="150" maxlength="500" placeholder="Mensagem"></textarea>
                        <div id="contador">500 caracteres restantes</div></br>
                        <div class="linhaBtnAdicionarComentarioVisaoCad">
                            <div class="divBtnAdicionarComentarioVisaoCad">
                                <input type="button" class="btnAdicionarComentarioVisaoCad" value ="Adicionar Comentário" attr-idSolicitacao="'.$idSolicitacao.'">
                            </div>
                        </div>    
                    </div>
                    
                    <div class="nestComentariosVisaoCad">
                    <div class="divTituloSecaoComentariosDaSolicitacao">
                        Histórico de comentários
                        <!--Icon chevron up-->
                        <i class="fa fa-chevron-up iconeSetaComentariosVisaoCadSolicitacaoNova" aria-hidden="true"></i>
                    </div>   
                    <div class="divAreaComentariosVisaoCadSolicitacaoNova">
                        '. $this->consultaComentarios($idSolicitacao)['mensagem'] .'
                    </div>    
                    
                    <div class="nestDadosSolicitacaoVisaoCad">   
                        <div class="divTituloSecaoDadosDaSolicitacao">
                            Dados da solicitação
                            <i class="fa fa-chevron-up iconeSetaDadosSolicitacao" aria-hidden="true"></i>
                            
                        </div> 
                        
                        <div class="divDadosdaSolicitacao divDadosdaSolicitacaoVisaoCadSolicitacaoNova">  

                        </div>
                    </div>
                </div> 
            ';
        }

        $retorno['status'] = '1';
        $retorno['mensagem'] = $paginaDeConsultaSolicitacao;

        return $retorno;
        
    }

    public function enviaPerguntasIa($solicitacaoIncluida){
        $mat = $_SESSION['matricula'];
        $db = New Database("solicitacoes");
        $queryConsultaPerguntasRespostas = "SELECT * FROM solicitacoes.analiseInteligenciaArtificial WHERE idSolicitacao = '".$solicitacaoIncluida."';";
        
        try {
            $execConsultaPerguntasRespostas = $db->DbGetAll($queryConsultaPerguntasRespostas);
            if($execConsultaPerguntasRespostas){
                
                $retorno['status'] = '1';
                $retorno['mensagem'] = $execConsultaPerguntasRespostas[0]['perguntaResposta'];
            }
        } catch (Exception $e){
            $status = '0';
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaPerguntasRespostas:" . $queryConsultaPerguntasRespostas;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "enviaPerguntasIa", $informacoesErro, $mat);
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível gravar sua solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function gravarRespostaIa($solicitacaoIncluida, $respostaIa, $tipoJornada){
        $mat = $_SESSION['matricula'];
        $db = New Database("solicitacoes");
        // if($tipoJornada == 'informacional'){
            $tabela = "analiseInteligenciaArtificial";

            // Expressão regular para capturar os textos entre as tags
            preg_match_all('/<([^>]+)>(.*?)<\/\1>/', $respostaIa, $matches, PREG_SET_ORDER);

            // Variáveis para armazenar os resultados
            $resumo_demanda = '';
            $classificacao_final = '';
            $justificativa = '';
            $resultado_final = '';

            // Iterar sobre os resultados e salvar em variáveis específicas
            foreach ($matches as $match) {
                $tag = $match[1];
                $content = $match[2];
                
                switch ($tag) {
                    case 'RESUMO_DEMANDA':
                        $resumoDemanda = $content;
                        break;
                    case 'CLASSIFICACAO_FINAL':
                        $classificacaoFinal = $content;
                        break;
                    case 'JUSTIFICATIVA':
                        $justificativa = $content;
                        break;
                    case 'RESULTADO_FINAL':
                        $resultadoFinal = $content;
                        break;
                    case 'HISTORIA':
                        $historia = $content;
                        break;
                    case 'CRITERIOS_DE_ACEITACAO':
                        $criteriosAceitacao = $content;
                        break;
                    case "CENARIOS_DE_TESTE":
                        $cenariosTeste = $content;
                        break;
                }
            }

            $queryConsultaPerguntasRespostas = "UPDATE `solicitacoes`.`".$tabela."`
                SET `analiseInteligênciaArtificial` = '".$respostaIa."', 
                    `timestampAnalise` = NOW(),
                    `resumoDemanda` = '".$resumoDemanda."',
                    `classificacaoFinal`= '".$classificacaoFinal."',
                    `justificativa` = '".$justificativa."',
                    `resultadoFinal` = '".$resultadoFinal."',
                    `historia` = '".$historia."',
                    `criteriosAceitacao` = '".$criteriosAceitacao."',
                    `cenariosTeste` = '".$cenariosTeste."'
                WHERE idSolicitacao = '".$solicitacaoIncluida."';";
        
        // } else {
        //     $tabela = "analiseInteligenciaArtificialJornadasTransacionais";
        // }
        // $queryConsultaPerguntasRespostas = "UPDATE `solicitacoes`.`".$tabela."` SET `analiseInteligênciaArtificial` = '".$respostaIa."', `timestampAnalise` = NOW() WHERE idSolicitacao = '".$solicitacaoIncluida."';";
        
        try {
            $execConsultaPerguntasRespostas = $db->DbGetAll($queryConsultaPerguntasRespostas);
            if($execConsultaPerguntasRespostas){
                
                $retorno['status'] = '1';
                $retorno['mensagem'] = $execConsultaPerguntasRespostas[0]['perguntaResposta'];
            }
        } catch (Exception $e){
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaPerguntasRespostas:" . $queryConsultaPerguntasRespostas;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravarRespostaIa", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível gravar a resposta da IA para a solicitação. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }


    public function escolhePaginaGestorOuCad($paginaEscolhida){
        $mat = $_SESSION['matricula'];
        try{
            if ($paginaEscolhida =="visaoCad"){

                $retorno = " 'solicitacoes_visaoCad.php'";
            
            } 
            
            else if ($paginaEscolhida =="visaoGestor"){

                $retorno = "'solicitacoes_visaoGestor.php'";
            }

            $retorno ['status'] = '1';
            $retorno['mensagem']= $paginaEscolhida;
        } catch (Exception $e){
            
            $status = '0';
            $retorno['status'] = $status;
            $retorno['mensagem'] = "Não foi possível realizar a operação";

        } finally {
            return $retorno['mensagem'];
        }
    }
    
    public function gravarComentario($idSolicitacao, $comentario){
        global $mat;
        $db = New Database("solicitacoes");
        $queryInsereComentario = "INSERT INTO `solicitacoes`.`comentarioAnaliseCad` (`idSolicitacao`, `comentario`, `matComentario`) VALUES ('".$idSolicitacao."', '".$comentario."', '".$mat."');";
        
        try {
            $execQueryInsereComentario = $db->DbQuery($queryInsereComentario);
            if($execQueryInsereComentario){
                $retorno['status'] = '1';
                $retorno['mensagem'] = 'Comentário incluído na solicitação nº'.$idSolicitacao.' com sucesso!';
            }
        } catch (Exception $e) {
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryInsereComentario:" . $queryInsereComentario;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "gravarComentario", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível gravar o comentário para a solicitação ".$idSolicitacao.". Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function consultaComentarios($idSolicitacao) {
        global $mat;
        $db = New Database("solicitacoes");
        $queryConsultaComentarios = "SELECT *, date_format(timestampComentario, '%d/%m/%Y %H:%i') as dataFormatada FROM solicitacoes.comentarioAnaliseCad WHERE idSolicitacao = '".$idSolicitacao."';";

        try {
            $execQueryConsultaComentarios = $db->DbGetAll($queryConsultaComentarios);
            if($execQueryConsultaComentarios){
                $montaComentarios = '';

                for($i=0; $i<sizeof($execQueryConsultaComentarios); $i++){
                    $montaComentarios = $montaComentarios.'
                        <div class= "comentarioVisaoCad">
                            <div class="barraTopoComentarioCad">
                                <span class="autorComentarioVisaoCad">'.$execQueryConsultaComentarios[$i]['matComentario'].'</span> 
                                <span class= "dataHoraComentarioVisaoCad">'.$execQueryConsultaComentarios[$i]['dataFormatada'].'</span>    
                            </div>
                            <div class="textoComentarioVisaoCad">'.$execQueryConsultaComentarios[$i]['comentario'].'</div>
                        </div>
                    ';
                }

                $retorno['status'] = '1';
                $retorno['mensagem'] = $montaComentarios;
            }
        } catch (Exception $e) {
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaComentarios:" . $queryConsultaComentarios;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "consultaComentarios", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível consultar os comentários da solicitação ".$idSolicitacao.". Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }

    }

    public function alteraStatusSolicitacao($idSolicitacao, $novoStatus){
        global $mat;
        $db = New Database("solicitacoes");
        $queryAlteraStatusSolicitacao = "UPDATE `solicitacoes`.`solicitacoes` SET `status` = '".$novoStatus."' WHERE (`idSolicitacao` = '".$idSolicitacao."');";

        try {
            $execQueryAlteraStatusSolicitacao = $db->DbQuery($queryAlteraStatusSolicitacao);
            if($execQueryAlteraStatusSolicitacao){
                $queryConsultaNotificacaoVisualizada = "SELECT * FROM solicitacoes.visualizaNotificacaoVisaoGestor WHERE idSolicitacao = '".$idSolicitacao."' AND solicitacaoVisualizada = 0;";
                $execQueryConsultaNotificacaoVisualizada = $db->DbGetAll($queryConsultaNotificacaoVisualizada);
                if(sizeof($execQueryConsultaNotificacaoVisualizada) > 0){
                    $queryUpdateAntesDeInserir = "UPDATE `solicitacoes`.`visualizaNotificacaoVisaoGestor`
                        SET `solicitacaoVisualizada` = '1' 
                        WHERE (`idSolicitacao` = '".$idSolicitacao."') and (`statusAtual` = '".$execQueryConsultaNotificacaoVisualizada[0]['statusAtual']."');";
                    try {
                        $execQueryUpdateAntesDeInserir = $db->DbQuery($queryUpdateAntesDeInserir);
                        if($execQueryUpdateAntesDeInserir){
                            $queryInsereNotificacaoGestor = "INSERT INTO `solicitacoes`.`visualizaNotificacaoVisaoGestor` (`idSolicitacao`, `statusAtual`, `solicitacaoVisualizada`, `timestampCriacao`) VALUES ('".$idSolicitacao."', '".$novoStatus."', '0', NOW());";
                            try {
                                $execQueryInsereNotificacaoGestor = $db->DbQuery($queryInsereNotificacaoGestor);
                                if($execQueryInsereNotificacaoGestor){
                                    $retorno['status'] = '1';
                                    $retorno['mensagem'] = 'Status alterado com sucesso!';
                                }
                            } catch (Exception $e) {
                                $informacoesErro = "Erro: " . $e . "\n\\n\$queryInsereNotificacaoGestor:" . $queryInsereNotificacaoGestor;
                                $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
                                $retorno['status'] = '0';
                                $retorno['mensagem'] = "O status da solicitação ".$idSolicitacao." foi alterado, mas não foi possível gravar a notificação para o Gestor. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                            }
                        }
                    } catch (Exception $e) {
                        $informacoesErro = "Erro: " . $e . "\n\\n\$queryInsereNotificacaoGestor:" . $queryInsereNotificacaoGestor . "\n\\n\$queryUpdateAntesDeInserir: ".$queryUpdateAntesDeInserir;
                        $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
                        $retorno['status'] = '0';
                        $retorno['mensagem'] = "O status da solicitação ".$idSolicitacao." foi alterado, mas não foi possível gravar a notificação para o Gestor. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                    }
                } else {
                    $queryInsereNotificacaoGestor = "INSERT INTO `solicitacoes`.`visualizaNotificacaoVisaoGestor` (`idSolicitacao`, `statusAtual`, `solicitacaoVisualizada`, `timestampCriacao`) VALUES ('".$idSolicitacao."', '".$novoStatus."', '0', NOW());";
                    try {
                        $execQueryInsereNotificacaoGestor = $db->DbQuery($queryInsereNotificacaoGestor);
                        if($execQueryInsereNotificacaoGestor){
                            $retorno['status'] = '1';
                            $retorno['mensagem'] = 'Status alterado com sucesso!';
                        }
                    } catch (Exception $e) {
                        $informacoesErro = "Erro: " . $e . "\n\\n\$queryInsereNotificacaoGestor:" . $queryInsereNotificacaoGestor;
                        $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
                        $retorno['status'] = '0';
                        $retorno['mensagem'] = "O status da solicitação ".$idSolicitacao." foi alterado, mas não foi possível gravar a notificação para o Gestor. Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
                    }
                }
            }
        } catch (Exception $e) {
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryAlteraStatusSolicitacao:" . $queryAlteraStatusSolicitacao;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível alterar o status da solicitação ".$idSolicitacao.". Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }

    public function contaQtdeNotificacoesGestor($prefixo) {
        global $mat;
        $db = New Database("solicitacoes");
        $queryConsultaQtdeNotificacoes = "SELECT count(distinct(a.idSolicitacao)) as totalNotificacoes FROM solicitacoes.solicitacoes a
            LEFT JOIN solicitacoes.visualizaNotificacaoVisaoGestor b ON a.idSolicitacao = b.idSolicitacao
            WHERE solicitacaoVisualizada = 0 and prefixo = '".$prefixo."';";
        try {
            $execQueryConsultaQtdeNotificacoes = $db->DbGetAll($queryConsultaQtdeNotificacoes);
            if($execQueryConsultaQtdeNotificacoes){
                $retorno['status'] = '1';
                $retorno['mensagem'] = $execQueryConsultaQtdeNotificacoes[0]['totalNotificacoes'];
            }
        } catch (Exception $e) {
            $informacoesErro = "Erro: " . $e . "\n\\n\$queryConsultaQtdeNotificacoes:" . $queryConsultaQtdeNotificacoes;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "*";
        } finally {
            return $retorno;
        }
    }

    public function limpaNotificacaoVisaoGestor($idSolicitacao){
        global $mat;
        $db = New Database("solicitacoes");
        $queryConsultaQtdeNotificacoes = "SELECT * FROM solicitacoes.visualizaNotificacaoVisaoGestor WHERE idSolicitacao = '".$idSolicitacao."' AND solicitacaoVisualizada = '0';";
        
        try {
            $execQueryConsultaQtdeNotificacoes = $db->DbGetAll($queryConsultaQtdeNotificacoes);

            if(sizeof($execQueryConsultaQtdeNotificacoes) > 0){
                $queryUpdateNotificacao = "UPDATE `solicitacoes`.`visualizaNotificacaoVisaoGestor` SET `solicitacaoVisualizada` = '1', `timestampVisualizacao` = NOW() 
                    WHERE (`idSolicitacao` = '".$idSolicitacao."') and (`statusAtual` = '".$execQueryConsultaQtdeNotificacoes[0]['statusAtual']."');"
                ;
                $execQueryUpdateNotificacao = $db->DbQuery($queryUpdateNotificacao);
            }
            
            $retorno['status'] = '1';
            $retorno['mensagem'] = $this->contaQtdeNotificacoesGestor($_SESSION['dependencia'])['mensagem'];

        } catch (Exception $e) {
            $retorno['status'] = '0';
            $retorno['mensagem'] = "*";
        } finally {
            return $retorno;
        }
    }

    public function gravaParecerFinal($idSolicitacao, $textoParecerFinal){
        global $mat;
        $db = New Database("solicitacoes");

        $queryInsereParecerFinal = "INSERT INTO `solicitacoes`.`parecerFinalCad` (`idSolicitacao`, `parecerFinal`, `matricula`) VALUES ('".$idSolicitacao."', '".$textoParecerFinal."', '".$mat."');";
        try {
            $execQueryInsereParecerFinal = $db->DbQuery($queryInsereParecerFinal);

            if($execQueryInsereParecerFinal){
                $retorno['status'] = '1';
                $retorno['mensagem'] = 'Parecer final gravado com sucesso!';
            } else {
                $informacoesErro = "Erro: \n\\n\$queryInsereParecerFinal:" . $queryInsereParecerFinal;
                $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
                $retorno['status'] = '0';
                $retorno['mensagem'] = "Não foi possível gravar o parecer final e alterar o status da solicitação ".$idSolicitacao.". Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
            }
        } catch (Exception $e) {
            $informacoesErro = "Erro: ".$e."\n\\n\$queryInsereParecerFinal:" . $queryInsereParecerFinal;
            $arquivoLog = $this->geraLogExcecao("solicitacoes", "alteraStatusSolicitacao", $informacoesErro, $mat);
            $retorno['status'] = '0';
            $retorno['mensagem'] = "Não foi possível gravar o parecer final e alterar o status da solicitação ".$idSolicitacao.". Informe à equipe responsável o caminho a seguir: " . $arquivoLog;
        } finally {
            return $retorno;
        }
    }
    
}